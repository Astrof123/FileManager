!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FileManagerLibrary=t():e.FileManagerLibrary=t()}(this,(()=>(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{FileManager:()=>a,FileManagerServer:()=>l,default:()=>n});class s{constructor(e=null){if(this.updatableElements={},this.fileManagerMutableStyles={colors:{hover:"#3e3e3e",border:"#2B2B2B",main_background:"#252526",selected:"#4a4a4a",text_color:"#ffffff"},sizing:{tools:"medium",address:"medium",navigation_pane:"medium",content_pane:"medium",settings_panel:"medium"}},this.fileManagerHeaderStyles={},this.fileManagerStyles={},this.customStyles=e,this.setDefaultMutableStyles(),localStorage.fmMutableStyles)this.updateMutableStyles();else{let e=this.getDefaultMutableStyles();this.setMutableStyles(e),this.updateMutableStyles()}this.updateFileManagerStyles(),this.updateFileManagerHeaderStyles(),this.headerStyleElement=document.createElement("style"),document.head.prepend(this.headerStyleElement)}updateFileManagerStyles(){if(this.fileManagerStyles={fm_super_root:{"box-sizing":"border-box",fontFamily:"inherit",width:"100%",height:"100%","min-height":"300px","min-width":"550px",display:"flex","flex-direction":"column","border-radius":"4px",padding:"8px 16px","background-color":this.fileManagerMutableStyles.colors.main_background},fm_folders_nav:{width:"220px",border:this.settingSizing([3],"navigation_pane")+` solid ${this.fileManagerMutableStyles.colors.border}`,"border-radius":"4px","background-color":this.fileManagerMutableStyles.colors.main_background,color:"#e3e3e3",overflowX:"scroll",height:"100%",scrollbarWidth:"thin",scrollbarColor:`#888 ${this.fileManagerMutableStyles.colors.border}`,display:"flex","box-sizing":"border-box",resize:"horizontal"},fm_folder_icon:{width:this.settingSizing([22],"navigation_pane"),marginRight:this.settingSizing([8],"navigation_pane")},fm_folder_name:{fontSize:this.settingSizing([14],"navigation_pane"),color:this.fileManagerMutableStyles.colors.text_color,"text-overflow":"ellipsis",width:"90%","white-space":"nowrap"},fm_folder:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",marginLeft:"24px"},fm_folder_parent:{display:"flex",alignItems:"center",cursor:"pointer",width:"100%",overflow:"hidden"},fm_folder_open_icon_wrapper:{paddingLeft:this.settingSizing([4],"navigation_pane"),paddingRight:this.settingSizing([8],"navigation_pane")},fm_folder_parent__opened:{"background-color":this.fileManagerMutableStyles.colors.selected},fm_openedFile:{"background-color":this.fileManagerMutableStyles.colors.selected},fm_folder_open_icon:{width:this.settingSizing([10],"navigation_pane")},fm_folder_wrapper:{position:"relative",left:this.settingSizing([24],"navigation_pane"),userSelect:"none","box-sizing":"border-box","min-width":"100%",display:"table"},fm_folder_root_wrapper:{position:"static"},fm_content_pane:{border:this.settingSizing([3],"content_pane")+` solid ${this.fileManagerMutableStyles.colors.border}`,"background-color":this.fileManagerMutableStyles.colors.main_background,color:"#e3e3e3",width:"100%","border-radius":"4px",overflowY:"auto",height:"100%"},fm_filemanager_main:{display:"flex",flexDirection:"row",gap:"8px",paddingTop:"8px","background-color":this.fileManagerMutableStyles.colors.main_background,"flex-grow":"1","box-sizing":"border-box",overflow:"hidden"},fm_metadata_block:{flexDirection:"row",borderBottom:this.settingSizing([3],"content_pane")+` solid ${this.fileManagerMutableStyles.colors.border}`,padding:this.settingSizing([8],"content_pane"),fontSize:this.settingSizing([12],"content_pane"),paddingLeft:this.settingSizing([12],"content_pane")},fm_metadata:{userSelect:"none",color:this.fileManagerMutableStyles.colors.text_color},fm_metadata_name:{width:"37%"},fm_metadata_changedate:{width:"34%"},fm_file_changedate:{width:"32%"},fm_metadata_type:{width:"14%"},fm_metadata_size:{width:"14%"},fm_file_type:{width:"14%"},fm_file_size:{width:"14%"},fm_files_list:{padding:"8px 0px","flex-grow":"1"},fm_file_metadata:{userSelect:"none",color:this.fileManagerMutableStyles.colors.text_color,"margin-right":"2%","font-size":this.settingSizing([16],"content_pane"),"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"},fm_file_block:{display:"flex",flexDirection:"row",alignItems:"center",borderBottom:this.settingSizing([2],"content_pane")+` solid ${this.fileManagerMutableStyles.colors.border}`,padding:this.settingSizing([8,0],"content_pane"),paddingLeft:this.settingSizing([12],"content_pane"),cursor:"pointer"},fm_file_icon:{width:this.settingSizing([22],"content_pane"),marginRight:"2%",userSelect:"none"},fm_file_name:{width:"31%",overflow:"hidden","box-sizing":"border-box","white-space":"nowrap"},fm_filemanager_tools:{border:`3px solid ${this.fileManagerMutableStyles.colors.border}`,"background-color":this.fileManagerMutableStyles.colors.main_background,display:"flex",flexDirection:"row",alignItems:"center","box-sizing":"border-box",padding:"2px 0px"},fm_filemanager_address:{border:`3px solid ${this.fileManagerMutableStyles.colors.border}`,"border-bottom":"0px","background-color":this.fileManagerMutableStyles.colors.main_background,"border-radius":"4px 4px 0px 0px",padding:"8px 16px",display:"flex",flexDirection:"row"},fm_filemanager_arrow:{width:this.settingSizing([16],"address"),display:"block",userSelect:"none"},fm_arrows_block:{border:this.settingSizing([3],"address")+` solid ${this.fileManagerMutableStyles.colors.border}`,display:"flex","border-radius":"4px"},fm_arrow_wrapper:{padding:this.settingSizing([8,12],"address"),"border-radius":"4px",cursor:"pointer"},fm_add_file_button:{color:this.fileManagerMutableStyles.colors.text_color,"background-color":this.fileManagerMutableStyles.colors.main_background,border:this.settingSizing([3],"tools")+` solid ${this.fileManagerMutableStyles.colors.border}`,borderTop:"none",borderBottom:"none",borderLeft:"none",padding:this.settingSizing([8,12],"tools"),display:"flex",alignItems:"center",gap:this.settingSizing([8],"tools"),cursor:"pointer",fontSize:this.settingSizing([13],"tools"),fontWeight:"500",height:"100%","user-select":"none"},fm_add_file_icon:{width:this.settingSizing([24],"tools")},fm_tool:{width:this.settingSizing([35],"tools"),height:this.settingSizing([35],"tools"),padding:this.settingSizing([8],"tools"),margin:this.settingSizing([0,8],"tools"),cursor:"pointer",display:"block",userSelect:"none","box-sizing":"border-box"},fm_current_path:{border:`3px solid ${this.fileManagerMutableStyles.colors.border}`,"border-radius":"4px",width:"100%","flex-grow":"100",marginLeft:"16px",display:"flex",flexDirection:"row",alignItems:"center",gap:"8px",padding:"6px 12px",marginRight:"8px","overflow-x":"scroll","white-space":"nowrap"},fm_path_arrow:{width:"12px","user-select":"none"},fm_path_folder:{color:this.fileManagerMutableStyles.colors.text_color,userSelect:"none","font-size":this.settingSizing([16],"address")},fm_search:{border:`3px solid ${this.fileManagerMutableStyles.colors.border}`,"border-radius":"4px","background-color":this.fileManagerMutableStyles.colors.main_background,padding:"0px 8px",color:"#ffff",width:"20%","font-size":this.settingSizing([14],"address"),"user-select":"none"},fm_grid_wrapper:{display:"flex","flex-grow":"1",justifyContent:"flex-end"},fm_disabled:{opacity:"0.5"},fm_upload_files_block:{display:"flex",flexDirection:"column","background-color":this.fileManagerMutableStyles.colors.hover,width:this.settingSizing([191],"tools"),border:this.settingSizing([3],"tools")+` solid ${this.fileManagerMutableStyles.colors.border}`,borderTop:"none",position:"absolute",bottom:this.settingSizing([-84],"tools"),zIndex:"10",cursor:"pointer","box-sizing":"border-box"},fm_upload_files_func_wrapper:{display:"flex",flexDirection:"row",padding:this.settingSizing([8],"tools"),gap:this.settingSizing([8],"tools"),alignItems:"center",width:"100%",userSelect:"none","box-sizing":"border-box",position:"relative"},fm_upload_files_func_icon:{width:this.settingSizing([24],"tools")},fm_upload_files_func_name:{color:this.fileManagerMutableStyles.colors.text_color,fontSize:this.settingSizing([13],"tools"),fontWeight:"500"},fm_hidden:{display:"none"},fm_upload_files_func_input:{position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px",opacity:"0"},fm_upload_file_func_input:{position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px",opacity:"0"},fm_tool_active:{opacity:"0.6"},fm_settings_panel:{"background-color":this.fileManagerMutableStyles.colors.main_background,width:"100%",height:"100%",padding:"4%","box-sizing":"border-box","border-radius":"4px"},fm_leave_settings_arrow:{width:this.settingSizing([35],"settings_panel"),height:this.settingSizing([35],"settings_panel"),padding:"8px",cursor:"pointer",display:"block",userSelect:"none","box-sizing":"border-box"},fm_params_panel:{display:"flex","flex-direction":"row",padding:this.settingSizing([16,8],"settings_panel"),"flex-wrap":"wrap",gap:this.settingSizing([12],"settings_panel"),overflow:"auto","margin-bottom":this.settingSizing([12],"settings_panel")},fm_color_label:{color:this.fileManagerMutableStyles.colors.text_color,display:"flex",gap:this.settingSizing([8],"settings_panel"),"flex-direction":"column",padding:this.settingSizing([16],"settings_panel"),border:this.settingSizing([3],"settings_panel")+` solid ${this.fileManagerMutableStyles.colors.border}`,"border-radius":"8px","font-size":this.settingSizing([16],"settings_panel")},fm_color_input:{width:this.settingSizing([40],"settings_panel"),height:this.settingSizing([40],"settings_panel"),"box-shadow":"0px 4px 8px 0px rgba(171, 171, 171, 0.2)",padding:"0px",margin:"0px",border:"none",cursor:"pointer","border-radius":"4px"},fm_title_block:{color:this.fileManagerMutableStyles.colors.text_color,"font-size":this.settingSizing([20],"settings_panel"),"font-weight":"600",display:"flex","flex-direction":"column-reverse",gap:this.settingSizing([16],"settings_panel"),"margin-left":"12px"},fm_buttons_panel:{display:"flex","justify-content":"flex-end",gap:"16px","align-items":"center"},fm_submit_settings_button:{padding:this.settingSizing([12],"settings_panel"),"background-color":"#a7d649",border:"none","border-radius":"8px","font-weight":"600",cursor:"pointer","font-size":this.settingSizing([14],"settings_panel")},fm_settings_form:{height:"85%",display:"flex","flex-direction":"column","justify-content":"space-between","box-sizing":"border-box"},fm_reset_settings_button:{padding:this.settingSizing([12],"settings_panel"),"background-color":"#a9b09b",border:"none","border-radius":"8px","font-weight":"600",cursor:"pointer","font-size":this.settingSizing([14],"settings_panel")},fm_message_submit:{color:"#a7d649"},fm_files_tiles:{"flex-wrap":"wrap","flex-direction":"row","row-gap":this.settingSizing([8],"content_pane"),"column-gap":"1%",padding:this.settingSizing([12],"content_pane"),"box-sizing":"border-box",height:"100%","align-content":"flex-start"},fm_selected:{"background-color":this.fileManagerMutableStyles.colors.selected,"border-radius":"4px"},fm_file_block_tiles:{width:this.settingSizing([90],"content_pane"),display:"flex","flex-direction":"column","align-items":"center","justify-content":"space-beetwen",gap:this.settingSizing([8],"content_pane"),border:this.settingSizing([3],"content_pane")+` solid ${this.fileManagerMutableStyles.colors.border}`,padding:this.settingSizing([6],"content_pane"),cursor:"pointer","box-sizing":"border-box","border-radius":"6px",overflow:"hidden",height:this.settingSizing([104],"content_pane")},fm_file_name_tiles:{"box-sizing":"border-box","font-size":this.settingSizing([13],"content_pane"),"text-align":"center",overflow:"hidden","word-break":"break-all",display:"flex","text-overflow":"ellipsis","font-weight":"500","user-select":"none",color:this.fileManagerMutableStyles.colors.text_color},fm_file_icon_tiles:{"max-width":this.settingSizing([62],"content_pane"),"max-height":this.settingSizing([41],"content_pane"),"user-select":"none"},fm_loader:{width:"48px",height:"48px","border-radius":"50%",display:"inline-block","box-sizing":"border-box","border-top":"4px solid #FFF","border-right":"4px solid transparent"},fm_loader_wrapper:{display:"flex",width:"100%",height:"100%","align-items":"center","justify-content":"center"},fm_select_input:{width:this.settingSizing([75],"settings_panel"),height:this.settingSizing([22],"settings_panel"),"border-radius":"4px","font-size":this.settingSizing([12],"settings_panel")},fm_file_name_wrapper:{"max-height":"100%","box-sizing":"border-box",overflow:"hidden"},fm_empty_message:{"font-size":this.settingSizing([16],"content_pane"),color:this.fileManagerMutableStyles.colors.text_color,width:"100%","text-align":"center",display:"block","margin-top":this.settingSizing([12],"content_pane"),"user-select":"none"}},null!=this.customStyles)for(let e in this.customStyles)if(e in this.fileManagerStyles)for(let t in this.customStyles[e])this.fileManagerStyles[e][t]=this.customStyles[e][t]}updateFileManagerHeaderStyles(){this.fileManagerHeaderStyles={"fm_folder_parent:hover":{"background-color":this.fileManagerMutableStyles.colors.hover},"fm_folders_nav::-webkit-scrollbar":{width:this.settingSizing([10],"navigation_pane")},"fm_content_pane::-webkit-scrollbar":{width:this.settingSizing([10],"content_pane")},"fm_folders_nav::-webkit-scrollbar-track":{"background-color":this.fileManagerMutableStyles.colors.border},"fm_content_pane::-webkit-scrollbar-track":{"background-color":this.fileManagerMutableStyles.colors.border},"fm_folders_nav::-webkit-scrollbar-thumb":{"background-color":"#888"},"fm_content_pane::-webkit-scrollbar-thumb":{"background-color":"#888"},"fm_arrow_wrapper:hover":{"background-color":this.fileManagerMutableStyles.colors.hover},"fm_arrow_wrapper:active":{opacity:"0.6"},"fm_add_file_button:hover":{"background-color":this.fileManagerMutableStyles.colors.hover},"fm_tool:hover, fm_leave_settings_arrow:hover":{"background-color":this.fileManagerMutableStyles.colors.hover,"border-radius":"4px"},"fm_leave_settings_arrow:hover":{"background-color":this.fileManagerMutableStyles.colors.hover,"border-radius":"4px"},"fm_path_folder:hover":{color:"#dcdbdb",cursor:"pointer"},"fm_file_block:hover":{"background-color":this.fileManagerMutableStyles.colors.hover},"fm_file_block_tiles:hover":{"background-color":this.fileManagerMutableStyles.colors.hover},"fm_search:focus":{"background-color":this.fileManagerMutableStyles.colors.hover},"fm_upload_files_func_wrapper:hover":{"background-color":this.fileManagerMutableStyles.colors.selected},"fm_submit_settings_button:hover":{"background-color":"#94be41"},"fm_reset_settings_button:hover":{"background-color":"#9aa08e"},"fm_current_path::-webkit-scrollbar":{width:this.settingSizing([10],"address"),height:"4px"},"fm_current_path::-webkit-scrollbar-track":{"background-color":this.fileManagerMutableStyles.colors.border},"fm_current_path::-webkit-scrollbar-thumb":{"background-color":"#888"}}}fmAddClass(e,t){Object.assign(e.style,this.fileManagerStyles[t])}fmRemoveClass(e,t){let s=this.fileManagerStyles[t];for(let i in s)"fm_openedFile"===t&&"background-color"===i||"fm_folder_parent__opened"===t&&"background-color"===i||"fm_selected"===t&&"background-color"===i?e.style.backgroundColor="":"fm_disabled"===t&&"opacity"===i?e.style.opacity="1":"fm_hidden"===t&&"display"===i&&(e.style.display="block")}settingSizing(e,t){let s="",i=1;"xsmall"===this.fileManagerMutableStyles.sizing[t]?i=.75:"small"===this.fileManagerMutableStyles.sizing[t]?i=.9:"medium"===this.fileManagerMutableStyles.sizing[t]?i=1:"large"===this.fileManagerMutableStyles.sizing[t]?i=1.2:"xlarge"===this.fileManagerMutableStyles.sizing[t]&&(i=1.4);for(let t=0;t<e.length;t++)s+=String(e[t]*i)+"px ";return s.trim()}updateHeaderStyles(){this.headerStyleElement.textContent="\n            .fm_loader::after {\n                content: '';  \n                box-sizing: border-box;\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 48px;\n                height: 48px;\n                border-radius: 50%;\n                border-bottom: 4px solid #FF3D00;\n                border-left: 4px solid transparent;\n            }\n        ";for(let e in this.fileManagerHeaderStyles){this.headerStyleElement.textContent+=`.${e} {\n`;for(let t in this.fileManagerHeaderStyles[e])this.headerStyleElement.textContent+=`    ${t}: ${this.fileManagerHeaderStyles[e][t]};\n`;this.headerStyleElement.textContent+="}\n"}}updateUpdatableElements(){for(let e in this.updatableElements)this.updatableElements[e].forEach((t=>{Object.assign(t.style,this.fileManagerStyles[e])}))}updateMutableStyles(){this.fileManagerMutableStyles=JSON.parse(localStorage.fmMutableStyles)}setMutableStyles(e){localStorage.fmMutableStyles=JSON.stringify(e)}getDefaultMutableStyles(){return JSON.parse(localStorage.fmDefaultMutableStyles)}setDefaultMutableStyles(){localStorage.fmDefaultMutableStyles=JSON.stringify({colors:{hover:"#3e3e3e",border:"#2B2B2B",main_background:"#252526",selected:"#4a4a4a",text_color:"#ffffff"},sizing:{tools:"medium",address:"medium",navigation_pane:"medium",content_pane:"medium",settings_panel:"medium"}})}addRotationAnimation(e){e.animate([{transform:"rotate(0deg)"},{transform:"rotate(360deg)"}],{duration:1e3,iterations:1/0,easing:"linear"})}}var i=function(e,t,s,i){return new(s||(s=Promise))((function(l,a){function n(e){try{r(i.next(e))}catch(e){a(e)}}function o(e){try{r(i.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(n,o)}r((i=i.apply(e,t||[])).next())}))};class l{}class a{constructor(e,t,i,l=null,a=null){var n,o,r,d,h,c,m,f,u,p,g,_,v,y,S,b,F,M,E,L,w,C,P,x,k,A,T,z,O,D,H,I,R,B,q,$,N,U,K,j,X,W,J,G,V,Y,Z,Q,ee,te,se,ie,le,ae,ne,oe,re,de,he,ce,me,fe,ue,pe,ge,_e,ve,ye,Se,be,Fe,Me,Ee,Le,we,Ce,Pe,xe,ke,Ae,Te,ze;this.translations={en:{Upload:"Upload",Searching:"Searching","Upload file":"Upload file","Upload folder":"Upload folder",Settings:"Settings","Hover color":"Hover color","Background color":"Background color","Border color":"Border color","Select color":"Select color","Text color":"Text color","Address Pane interface":"Address Pane interface","Tools Pane interface":"Tools Pane interface","Navigation Pane interface":"Navigation Pane interface","Content Pane interface":"Content Pane interface","Settings Pane interface":"Settings Pane interface:",medium:"medium",xsmall:"xsmall",small:"small",large:"large",xlarge:"xlarge","To default":"To default",Submit:"Submit",Success:"Success",Refresh:"Refresh",Up:"Up",Back:"Back","This folder is empty.":"This folder is empty.","Cut file/folder":"Cut file/folder","Copy file/folder":"Copy file/folder","Paste file/folder":"Paste file/folder","Rename file/folder":"Rename file/folder","Remove file/folder":"Remove file/folder","Download file/folder":"Download file/folder","Create empty file":"Create empty file","Create empty folder":"Create empty folder",Name:"Name","Date of change":"Date of change",Type:"Type",Size:"Size",Byte:"Byte",Folder:"Folder",file:"file","Change file display to list":"Change file display to list","Change file display to tiles":"Change file display to tiles",MB:"MB",KB:"KB",Image:"Image","Are you sure you want to reset?":"Are you sure you want to reset?","Are you sure you want to delete?":"Are you sure you want to delete?","Are you sure you want to download?":"Are you sure you want to download?"},ru:{Upload:"Загрузить",Searching:"Поиск","Upload file":"Загрузить файл","Upload folder":"Загрузить папку",Settings:"Настройки","Hover color":"Цвет при наведении","Background color":"Цвет фона","Border color":"Цвет рамки","Select color":"Цвет выделения","Text color":"Цвет текста","Address Pane interface":"Интерфейс панели адреса","Tools Pane interface":"Интерфейс панели инструментов","Navigation Pane interface":"Интерфейс панели навигации","Content Pane interface":"Интерфейс панели контента","Settings Pane interface":"Интерфейс панели настроек:",medium:"средний",xsmall:"очень маленький",small:"маленький",large:"большой",xlarge:"очень большой","To default":"По умолчанию",Submit:"Отправить",Success:"Успех",Refresh:"Обновить",Up:"Вверх",Back:"Назад","This folder is empty.":"Эта папка пуста.","Cut file/folder":"Вырезать файл/папку","Copy file/folder":"Копировать файл/папку","Paste file/folder":"Вставить файл/папку","Rename file/folder":"Переименовать файл/папку","Remove file/folder":"Удалить файл/папку","Download file/folder":"Скачать файл/папку","Create empty file":"Создать пустой файл","Create empty folder":"Создать пустую папку",Name:"Имя","Date of change":"Дата изменения",Type:"Тип",Size:"Размер",Byte:"Байт",Folder:"Папка",file:"файл","Change file display to list":"Изменить отображение файлов на список","Change file display to tiles":"Изменить отображение файлов на плитки",MB:"МБ",KB:"KБ",Image:"Изображение","Are you sure you want to reset?":"Вы уверены, что хотите сбросить настройки?","Are you sure you want to delete?":"Вы уверены, что хотите удалить?","Are you sure you want to download?":"Вы уверены, что хотите скачать?"},de:{Upload:"Hochladen",Searching:"Suche","Upload file":"Datei hochladen","Upload folder":"Ordner hochladen",Settings:"Einstellungen","Hover color":"Hover-Farbe","Background color":"Hintergrundfarbe","Border color":"Rahmenfarbe","Select color":"Farbe auswählen","Text color":"Textfarbe","Address Pane interface":"Adressleisten-Oberfläche","Tools Pane interface":"Werkzeugleisten-Oberfläche","Navigation Pane interface":"Navigationsleisten-Oberfläche","Content Pane interface":"Inhaltsbereich-Oberfläche","Settings Pane interface":"Einstellungsbereich-Oberfläche:",medium:"mittel",xsmall:"sehr klein",small:"klein",large:"groß",xlarge:"sehr groß","To default":"Standard",Submit:"Absenden",Success:"Erfolg",Refresh:"Aktualisieren",Up:"Hoch",Back:"Zurück","This folder is empty.":"Dieser Ordner ist leer.","Cut file/folder":"Datei/Ordner ausschneiden","Copy file/folder":"Datei/Ordner kopieren","Paste file/folder":"Datei/Ordner einfügen","Rename file/folder":"Datei/Ordner umbenennen","Remove file/folder":"Datei/Ordner entfernen","Download file/folder":"Datei/Ordner herunterladen","Create empty file":"Leere Datei erstellen","Create empty folder":"Leeren Ordner erstellen",Name:"Name","Date of change":"Änderungsdatum",Type:"Typ",Size:"Größe",Byte:"Byte",Folder:"Ordner",file:"Datei","Change file display to list":"Dateianzeige in Liste ändern","Change file display to tiles":"Dateianzeige in Kacheln ändern",MB:"MB",KB:"KB",Image:"Bild","Are you sure you want to reset?":"Möchten Sie wirklich zurücksetzen?","Are you sure you want to delete?":"Möchten Sie wirklich löschen?","Are you sure you want to download?":"Möchten Sie wirklich herunterladen?"},fr:{Upload:"Télécharger",Searching:"Recherche","Upload file":"Télécharger un fichier","Upload folder":"Télécharger un dossier",Settings:"Paramètres","Hover color":"Couleur de survol","Background color":"Couleur de fond","Border color":"Couleur de bordure","Select color":"Sélectionner une couleur","Text color":"Couleur du texte","Address Pane interface":"Interface du volet d'adresse","Tools Pane interface":"Interface du volet d'outils","Navigation Pane interface":"Interface du volet de navigation","Content Pane interface":"Interface du volet de contenu","Settings Pane interface":"Interface du volet de paramètres:",medium:"moyen",xsmall:"très petit",small:"petit",large:"grand",xlarge:"très grand","To default":"Par défaut",Submit:"Envoyer",Success:"Succès",Refresh:"Actualiser",Up:"Haut",Back:"Retour","This folder is empty.":"Ce dossier est vide.","Cut file/folder":"Couper le fichier/dossier","Copy file/folder":"Copier le fichier/dossier","Paste file/folder":"Coller le fichier/dossier","Rename file/folder":"Renommer le fichier/dossier","Remove file/folder":"Supprimer le fichier/dossier","Download file/folder":"Télécharger le fichier/dossier","Create empty file":"Créer un fichier vide","Create empty folder":"Créer un dossier vide",Name:"Nom","Date of change":"Date de modification",Type:"Type",Size:"Taille",Byte:"Octet",Folder:"Dossier",file:"fichier","Change file display to list":"Afficher les fichiers sous forme de liste","Change file display to tiles":"Afficher les fichiers sous forme de vignettes",MB:"MB",KB:"KB",Image:"Image","Are you sure you want to reset?":"Êtes-vous sûr de vouloir réinitialiser ?","Are you sure you want to delete?":"Êtes-vous sûr de vouloir supprimer ?","Are you sure you want to download?":"Êtes-vous sûr de vouloir télécharger ?"}},this.currentLang="en",this.image_extension=["png","jpg","jpeg","webp"],this.settingsForm=null,this.searchInputElement=null,this.searchingString="",this.lastFolders=[],this.currentPath="/",this.currentFiles=[],this.currentFilesPaths=[],this.selectedFilesPaths=[],this.copyState=!1,this.cutState=!1,this.openFolders=[],this.settingsPanel=null,this.toolsPane=null,this.addressPane=null,this.lastFile=null,this.settingsColorInput={},this.settingsInterfaceSelect={},this.toolsState={remove:!1,cut:!1,copy:!1,insert:!1,rename:!1,download:!1,createFile:!0,createFolder:!0},this.toolsElements=null,this.displayModesElements=null,this.arrowsElements=null,this.currentPathElem=null,this.uploadFilesPanel=null,this.currentDragPath=null,this.currentStartDragElement=null,this.currentDragingElement=null,document.addEventListener("keydown",this.handleKeyDown.bind(this)),this.options=i,this.iconsPaths=null===(n=this.options)||void 0===n?void 0:n.icons,this.FileManagerStyles=new s(l);for(let e in a)this.translations[e]=a[e];if(this.translations[null===(o=this.options)||void 0===o?void 0:o.language]?this.currentLang=null===(r=this.options)||void 0===r?void 0:r.language:this.currentLang="en",localStorage.fmFilesDisplayMode?this.filesDisplayMode=localStorage.fmFilesDisplayMode:(localStorage.fmFilesDisplayMode=(null===(h=null===(d=this.options)||void 0===d?void 0:d.toolsPaneOptions)||void 0===h?void 0:h.defaultFileDisplayMode)?null===(m=null===(c=this.options)||void 0===c?void 0:c.toolsPaneOptions)||void 0===m?void 0:m.defaultFileDisplayMode:"list",this.filesDisplayMode=(null===(u=null===(f=this.options)||void 0===f?void 0:f.toolsPaneOptions)||void 0===u?void 0:u.defaultFileDisplayMode)?null===(g=null===(p=this.options)||void 0===p?void 0:p.toolsPaneOptions)||void 0===g?void 0:g.defaultFileDisplayMode:"list"),this.FileManagerStyles.updateHeaderStyles(),this.rootFolderName=null!=(null===(_=this.options)||void 0===_?void 0:_.rootFolderName)?null===(v=this.options)||void 0===v?void 0:v.rootFolderName:"Root",this.FileManagerServer=t,this.arrowsState={back_arrow:!0,up_arrow:!1},!(e instanceof HTMLElement))throw new SyntaxError("An empty or invalid variable type was passed.");let Oe;if(this.root=e,this.filemanager_root=this.initInterface(),this.filemanager_root.addEventListener("click",this.handleFilemanagerClick.bind(this)),Oe=this.filemanager_root.querySelector(".fm_loader_wrapper"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");if(this.loaderElem=Oe,(null===(S=null===(y=this.options)||void 0===y?void 0:y.toolsPaneOptions)||void 0===S?void 0:S.toolsPaneEnabled)&&1==(null===(F=null===(b=this.options)||void 0===b?void 0:b.toolsPaneOptions)||void 0===F?void 0:F.uploadingFilesEnabled)){if(Oe=this.filemanager_root.querySelector(".fm_upload_files_block"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");this.uploadFilesPanel=Oe}if((null===(L=null===(E=null===(M=this.options)||void 0===M?void 0:M.toolsPaneOptions)||void 0===E?void 0:E.settingsOptions)||void 0===L?void 0:L.settingsEnabled)&&((null===(P=null===(C=null===(w=this.options)||void 0===w?void 0:w.toolsPaneOptions)||void 0===C?void 0:C.settingsOptions)||void 0===P?void 0:P.colorSettingsEnabled)||(null===(A=null===(k=null===(x=this.options)||void 0===x?void 0:x.toolsPaneOptions)||void 0===k?void 0:k.settingsOptions)||void 0===A?void 0:A.sizeSettingsEnabled))){if(Oe=this.filemanager_root.querySelector(".fm_settings_panel"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");this.settingsPanel=Oe}if(null===(z=null===(T=this.options)||void 0===T?void 0:T.addressPaneOptions)||void 0===z?void 0:z.addressPaneEnabled){if(Oe=this.filemanager_root.querySelector(".fm_filemanager_address"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");this.addressPane=Oe}if((null===(D=null===(O=this.options)||void 0===O?void 0:O.toolsPaneOptions)||void 0===D?void 0:D.toolsPaneEnabled)&&((null===(I=null===(H=this.options)||void 0===H?void 0:H.toolsPaneOptions)||void 0===I?void 0:I.uploadingFilesEnabled)||(null===(q=null===(B=null===(R=this.options)||void 0===R?void 0:R.toolsPaneOptions)||void 0===B?void 0:B.toolsEnabled)||void 0===q?void 0:q.deletingFiles)||(null===(U=null===(N=null===($=this.options)||void 0===$?void 0:$.toolsPaneOptions)||void 0===N?void 0:N.toolsEnabled)||void 0===U?void 0:U.movingFiles)||(null===(X=null===(j=null===(K=this.options)||void 0===K?void 0:K.toolsPaneOptions)||void 0===j?void 0:j.toolsEnabled)||void 0===X?void 0:X.renamingFiles)||(null===(G=null===(J=null===(W=this.options)||void 0===W?void 0:W.toolsPaneOptions)||void 0===J?void 0:J.toolsEnabled)||void 0===G?void 0:G.downloadingFiles))){if(Oe=this.filemanager_root.querySelector(".fm_filemanager_tools"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");this.toolsPane=Oe}if((null===(Z=null===(Y=null===(V=this.options)||void 0===V?void 0:V.toolsPaneOptions)||void 0===Y?void 0:Y.settingsOptions)||void 0===Z?void 0:Z.settingsEnabled)&&((null===(te=null===(ee=null===(Q=this.options)||void 0===Q?void 0:Q.toolsPaneOptions)||void 0===ee?void 0:ee.settingsOptions)||void 0===te?void 0:te.colorSettingsEnabled)||(null===(le=null===(ie=null===(se=this.options)||void 0===se?void 0:se.toolsPaneOptions)||void 0===ie?void 0:ie.settingsOptions)||void 0===le?void 0:le.sizeSettingsEnabled))){if(Oe=this.filemanager_root.querySelector(".fm_settings_form"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");this.settingsForm=Oe}if((null===(ne=null===(ae=this.options)||void 0===ae?void 0:ae.addressPaneOptions)||void 0===ne?void 0:ne.addressPaneEnabled)&&(null===(re=null===(oe=this.options)||void 0===oe?void 0:oe.addressPaneOptions)||void 0===re?void 0:re.searchingEnabled)){if(Oe=this.filemanager_root.querySelector(".fm_search"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");this.searchInputElement=Oe}if(Oe=this.filemanager_root.querySelector(".fm_filemanager_main"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");if(this.mainPanel=Oe,null===(he=null===(de=this.options)||void 0===de?void 0:de.addressPaneOptions)||void 0===he?void 0:he.addressPaneEnabled){if(Oe=this.filemanager_root.querySelector(".fm_current_path"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");this.currentPathElem=Oe}if(Oe=this.filemanager_root.querySelector(".fm_files_tiles"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");if(this.filesTilesElement=Oe,Oe=this.filemanager_root.querySelector(".fm_files_list"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");if(this.files_listHTML=Oe,Oe=this.filemanager_root.querySelector(".fm_metadata_block"),!(Oe instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");if(this.files_metadataHTML=Oe,null===(me=null===(ce=this.options)||void 0===ce?void 0:ce.addressPaneOptions)||void 0===me?void 0:me.addressPaneEnabled){let e=null,t=null;(null===(ue=null===(fe=this.options)||void 0===fe?void 0:fe.addressPaneOptions)||void 0===ue?void 0:ue.backButtonEnabled)&&(e=this.filemanager_root.querySelector(".fm_arrow_back")),(null===(ge=null===(pe=this.options)||void 0===pe?void 0:pe.addressPaneOptions)||void 0===ge?void 0:ge.upButtonEnabled)&&(t=this.filemanager_root.querySelector(".fm_arrow_up")),this.arrowsElements={back_arrow:e,up_arrow:t}}let De=null,He=null,Ie=null,Re=null,Be=null,qe=null,$e=null,Ne=null;if((null===(ye=null===(ve=null===(_e=this.options)||void 0===_e?void 0:_e.toolsPaneOptions)||void 0===ve?void 0:ve.toolsEnabled)||void 0===ye?void 0:ye.movingFiles)&&(De=this.filemanager_root.querySelector(".fm_cut"),He=this.filemanager_root.querySelector(".fm_copy"),Ie=this.filemanager_root.querySelector(".fm_insert")),1==(null===(Fe=null===(be=null===(Se=this.options)||void 0===Se?void 0:Se.toolsPaneOptions)||void 0===be?void 0:be.toolsEnabled)||void 0===Fe?void 0:Fe.deletingFiles)&&(Re=this.filemanager_root.querySelector(".fm_remove")),1==(null===(Le=null===(Ee=null===(Me=this.options)||void 0===Me?void 0:Me.toolsPaneOptions)||void 0===Ee?void 0:Ee.toolsEnabled)||void 0===Le?void 0:Le.renamingFiles)&&(Be=this.filemanager_root.querySelector(".fm_rename")),1==(null===(Pe=null===(Ce=null===(we=this.options)||void 0===we?void 0:we.toolsPaneOptions)||void 0===Ce?void 0:Ce.toolsEnabled)||void 0===Pe?void 0:Pe.downloadingFiles)&&(qe=this.filemanager_root.querySelector(".fm_download")),1==(null===(Ae=null===(ke=null===(xe=this.options)||void 0===xe?void 0:xe.toolsPaneOptions)||void 0===ke?void 0:ke.toolsEnabled)||void 0===Ae?void 0:Ae.createFiles)&&($e=this.filemanager_root.querySelector(".fm_create_file"),Ne=this.filemanager_root.querySelector(".fm_create_folder")),this.toolsElements={remove:Re,cut:De,copy:He,insert:Ie,rename:Be,download:qe,createFile:$e,createFolder:Ne},null===(ze=null===(Te=this.options)||void 0===Te?void 0:Te.toolsPaneOptions)||void 0===ze?void 0:ze.fileDisplayModesEnabled){const e=this.filemanager_root.querySelector(".fm_list"),t=this.filemanager_root.querySelector(".fm_tiles");if(!(e instanceof HTMLElement&&t instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");this.displayModesElements={list:e,tiles:t}}this.updateBackArrow(),Oe=document.querySelector(".fm_folder_root_wrapper");let Ue=null==Oe?void 0:Oe.querySelector(".fm_folder_parent");if(!(Ue instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");this.updateFileList(Ue,!0),this.updateListDisplayIcon(),this.updateTilesDisplayIcon()}createHTMLFileList(e,t=!0){let s=document.createElement("div");s.classList.add("fm_file_block"),this.FileManagerStyles.fmAddClass(s,"fm_file_block"),s.addEventListener("click",this.handleFileClick.bind(this)),t&&(s.addEventListener("dragleave",this.handleFilesDragLeave.bind(this)),s.addEventListener("drop",this.handleFilesDrop.bind(this)),s.addEventListener("dragstart",this.handleFilesDragStart.bind(this))),s.draggable=t,this.FileManagerStyles.updatableElements.fm_file_block?this.FileManagerStyles.updatableElements.fm_file_block.push(s):this.FileManagerStyles.updatableElements.fm_file_block=[s];let i=document.createElement("img");i.classList.add("fm_file_icon"),i.draggable=!1,this.FileManagerStyles.fmAddClass(i,"fm_file_icon"),this.FileManagerStyles.updatableElements.fm_file_icon?this.FileManagerStyles.updatableElements.fm_file_icon.push(i):this.FileManagerStyles.updatableElements.fm_file_icon=[i];let l=document.createElement("span");if(l.classList.add("fm_file_type"),l.classList.add("fm_file_metadata"),this.FileManagerStyles.fmAddClass(l,"fm_file_type"),this.FileManagerStyles.fmAddClass(l,"fm_file_metadata"),this.FileManagerStyles.updatableElements.fm_file_metadata?this.FileManagerStyles.updatableElements.fm_file_metadata.push(l):this.FileManagerStyles.updatableElements.fm_file_metadata=[l],e.isFolder)i.src=this.iconsPaths.folder,l.textContent=this.translations[this.currentLang].Folder,s.setAttribute("isFolder","true"),s.addEventListener("dragover",this.handleFilesDragOver.bind(this));else{let t=e.name.split(".");this.image_extension.includes(t[t.length-1])&&this.iconsPaths.picture?(i.src=this.iconsPaths.picture,l.textContent=this.translations[this.currentLang].Image):"css"===t[t.length-1]&&this.iconsPaths.css?(i.src=this.iconsPaths.css,l.textContent="CSS "+this.translations[this.currentLang].file):"doc"===t[t.length-1]&&this.iconsPaths.doc?(i.src=this.iconsPaths.doc,l.textContent="DOC "+this.translations[this.currentLang].file):"docx"===t[t.length-1]&&this.iconsPaths.docx?(i.src=this.iconsPaths.docx,l.textContent="DOCX "+this.translations[this.currentLang].file):"exe"===t[t.length-1]&&this.iconsPaths.exe?(i.src=this.iconsPaths.exe,l.textContent="EXE "+this.translations[this.currentLang].file):"html"===t[t.length-1]&&this.iconsPaths.html?(i.src=this.iconsPaths.html,l.textContent="HTML "+this.translations[this.currentLang].file):"mp4"===t[t.length-1]&&this.iconsPaths.mp4?(i.src=this.iconsPaths.mp4,l.textContent="MP4 "+this.translations[this.currentLang].file):"pdf"===t[t.length-1]&&this.iconsPaths.pdf?(i.src=this.iconsPaths.pdf,l.textContent="PDF "+this.translations[this.currentLang].file):"php"===t[t.length-1]&&this.iconsPaths.php?(i.src=this.iconsPaths.php,l.textContent="PHP "+this.translations[this.currentLang].file):"ppt"===t[t.length-1]&&this.iconsPaths.ppt?(i.src=this.iconsPaths.ppt,l.textContent="PPT "+this.translations[this.currentLang].file):"pptx"===t[t.length-1]&&this.iconsPaths.pptx?(i.src=this.iconsPaths.pptx,l.textContent="PPTX "+this.translations[this.currentLang].file):"py"===t[t.length-1]&&this.iconsPaths.py?(i.src=this.iconsPaths.py,l.textContent="PY "+this.translations[this.currentLang].file):"svg"===t[t.length-1]&&this.iconsPaths.svg?(i.src=this.iconsPaths.svg,l.textContent="SVG "+this.translations[this.currentLang].file):"wav"===t[t.length-1]&&this.iconsPaths.wav?(i.src=this.iconsPaths.wav,l.textContent="WAV "+this.translations[this.currentLang].file):"xls"===t[t.length-1]&&this.iconsPaths.xls?(i.src=this.iconsPaths.xls,l.textContent="XLS "+this.translations[this.currentLang].file):"xlsx"===t[t.length-1]&&this.iconsPaths.xlsx?(i.src=this.iconsPaths.xlsx,l.textContent="XSLX "+this.translations[this.currentLang].file):"zip"===t[t.length-1]&&this.iconsPaths.zipFolder?(i.src=this.iconsPaths.zipFolder,l.textContent="ZIP "+this.translations[this.currentLang].file):"rar"===t[t.length-1]&&this.iconsPaths.zipFolder?(i.src=this.iconsPaths.zipFolder,l.textContent="RAR "+this.translations[this.currentLang].file):(i.src=this.iconsPaths.textfile,l.textContent="TXT "+this.translations[this.currentLang].file),s.setAttribute("isFolder","false")}let a=document.createElement("span");a.classList.add("fm_file_name"),a.classList.add("fm_file_metadata"),this.FileManagerStyles.fmAddClass(a,"fm_file_name"),this.FileManagerStyles.fmAddClass(a,"fm_file_metadata"),this.FileManagerStyles.updatableElements.fm_file_metadata.push(a),a.textContent=e.name,a.draggable=!1;let n=document.createElement("span");n.classList.add("fm_file_changedate"),n.classList.add("fm_file_metadata"),this.FileManagerStyles.fmAddClass(n,"fm_file_changedate"),this.FileManagerStyles.fmAddClass(n,"fm_file_metadata"),this.FileManagerStyles.updatableElements.fm_file_metadata.push(n),n.textContent=e.changedate,n.draggable=!1;let o=document.createElement("span");if(o.classList.add("fm_file_size"),o.classList.add("fm_file_metadata"),this.FileManagerStyles.fmAddClass(o,"fm_file_size"),this.FileManagerStyles.fmAddClass(o,"fm_file_metadata"),this.FileManagerStyles.updatableElements.fm_file_metadata.push(o),o.draggable=!1,e.isFolder)o.textContent="";else{const t=e.size.match(/-?\d+(\.\d+)?/);let s=t?parseFloat(t[0]):NaN;s>1048576?(s/=1048576,o.textContent=String(Math.round(10*s)/10)+" "+this.translations[this.currentLang].MB):s>1024?(s/=1024,o.textContent=String(Math.round(10*s)/10)+" "+this.translations[this.currentLang].KB):o.textContent=String(s)+" "+this.translations[this.currentLang].Byte}return s.append(i),s.append(a),s.append(n),s.append(l),s.append(o),this.files_listHTML.append(s),s}createHTMLFileTiles(e,t=!0){let s=document.createElement("div");s.classList.add("fm_file_block"),s.classList.add("fm_file_block_tiles"),this.FileManagerStyles.fmAddClass(s,"fm_file_block_tiles"),s.addEventListener("click",this.handleFileClick.bind(this)),t&&(s.addEventListener("dragleave",this.handleFilesDragLeave.bind(this)),s.addEventListener("drop",this.handleFilesDrop.bind(this)),s.addEventListener("dragstart",this.handleFilesDragStart.bind(this))),s.draggable=t,this.FileManagerStyles.updatableElements.fm_file_block_tiles?this.FileManagerStyles.updatableElements.fm_file_block_tiles.push(s):this.FileManagerStyles.updatableElements.fm_file_block_tiles=[s];let i=document.createElement("img");if(i.classList.add("fm_file_icon"),i.draggable=!1,this.FileManagerStyles.fmAddClass(i,"fm_file_icon_tiles"),this.FileManagerStyles.updatableElements.fm_file_icon_tiles?this.FileManagerStyles.updatableElements.fm_file_icon_tiles.push(i):this.FileManagerStyles.updatableElements.fm_file_icon_tiles=[i],e.isFolder)i.src=this.iconsPaths.folder,s.setAttribute("isFolder","true"),s.addEventListener("dragover",this.handleFilesDragOver.bind(this));else{let t=e.name.split(".");this.image_extension.includes(t[t.length-1])&&this.iconsPaths.picture?e.image?i.src=e.image:i.src=this.iconsPaths.picture:"css"===t[t.length-1]&&this.iconsPaths.css?i.src=this.iconsPaths.css:"doc"===t[t.length-1]&&this.iconsPaths.doc?i.src=this.iconsPaths.doc:"docx"===t[t.length-1]&&this.iconsPaths.docx?i.src=this.iconsPaths.docx:"exe"===t[t.length-1]&&this.iconsPaths.exe?i.src=this.iconsPaths.exe:"html"===t[t.length-1]&&this.iconsPaths.html?i.src=this.iconsPaths.html:"mp4"===t[t.length-1]&&this.iconsPaths.mp4?i.src=this.iconsPaths.mp4:"pdf"===t[t.length-1]&&this.iconsPaths.pdf?i.src=this.iconsPaths.pdf:"php"===t[t.length-1]&&this.iconsPaths.php?i.src=this.iconsPaths.php:"ppt"===t[t.length-1]&&this.iconsPaths.ppt?i.src=this.iconsPaths.ppt:"pptx"===t[t.length-1]&&this.iconsPaths.pptx?i.src=this.iconsPaths.pptx:"py"===t[t.length-1]&&this.iconsPaths.py?i.src=this.iconsPaths.py:"svg"===t[t.length-1]&&this.iconsPaths.svg?i.src=this.iconsPaths.svg:"wav"===t[t.length-1]&&this.iconsPaths.wav?i.src=this.iconsPaths.wav:"xls"===t[t.length-1]&&this.iconsPaths.xls?i.src=this.iconsPaths.xls:"xlsx"===t[t.length-1]&&this.iconsPaths.xlsx?i.src=this.iconsPaths.xlsx:"zip"===t[t.length-1]&&this.iconsPaths.zipFolder||"rar"===t[t.length-1]&&this.iconsPaths.zipFolder?i.src=this.iconsPaths.zipFolder:i.src=this.iconsPaths.textfile,s.setAttribute("isFolder","false")}let l=document.createElement("span");return l.classList.add("fm_file_name"),l.classList.add("fm_file_metadata"),this.FileManagerStyles.fmAddClass(l,"fm_file_name_tiles"),l.textContent=e.name,l.draggable=!1,this.FileManagerStyles.updatableElements.fm_file_name_tiles?this.FileManagerStyles.updatableElements.fm_file_name_tiles.push(l):this.FileManagerStyles.updatableElements.fm_file_name_tiles=[l],s.append(i),s.append(l),this.filesTilesElement.append(s),s}createHTMLNavFolder(e,t,s=!1){let i=t.parentElement,l=null==i?void 0:i.getAttribute("path");if(!l&&!s)throw new Error("Element does not have a path attribute");let a=document.createElement("div");a.classList.add("fm_folder_wrapper"),this.FileManagerStyles.fmAddClass(a,"fm_folder_wrapper"),this.FileManagerStyles.updatableElements.fm_folder_wrapper?this.FileManagerStyles.updatableElements.fm_folder_wrapper.push(a):this.FileManagerStyles.updatableElements.fm_folder_wrapper=[a];let n=document.createElement("div");n.classList.add("fm_folder_children"),this.FileManagerStyles.fmAddClass(n,"fm_folder_children");let o=document.createElement("div");o.classList.add("fm_folder_parent"),this.FileManagerStyles.fmAddClass(o,"fm_folder_parent"),o.addEventListener("dragleave",this.handleFilesDragLeave.bind(this)),o.addEventListener("drop",this.handleFilesDrop.bind(this)),o.addEventListener("dragstart",this.handleFilesDragStart.bind(this)),o.addEventListener("dragover",this.handleFilesDragOver.bind(this));let r=document.createElement("div");r.classList.add("fm_folder_open_icon_wrapper"),this.FileManagerStyles.fmAddClass(r,"fm_folder_open_icon_wrapper"),this.FileManagerStyles.updatableElements.fm_folder_open_icon_wrapper?this.FileManagerStyles.updatableElements.fm_folder_open_icon_wrapper.push(r):this.FileManagerStyles.updatableElements.fm_folder_open_icon_wrapper=[r];let d=document.createElement("img");d.classList.add("fm_folder_open_icon"),this.FileManagerStyles.fmAddClass(d,"fm_folder_open_icon"),d.src=this.iconsPaths.arrowRightFolders,this.FileManagerStyles.updatableElements.fm_folder_open_icon?this.FileManagerStyles.updatableElements.fm_folder_open_icon.push(d):this.FileManagerStyles.updatableElements.fm_folder_open_icon=[d];let h=document.createElement("img");h.classList.add("fm_folder_icon"),this.FileManagerStyles.fmAddClass(h,"fm_folder_icon"),h.src=this.iconsPaths.folder,this.FileManagerStyles.updatableElements.fm_folder_icon?this.FileManagerStyles.updatableElements.fm_folder_icon.push(h):this.FileManagerStyles.updatableElements.fm_folder_icon=[h];let c=document.createElement("span");return c.classList.add("fm_folder_name"),this.FileManagerStyles.fmAddClass(c,"fm_folder_name"),c.textContent=e.name,this.FileManagerStyles.updatableElements.fm_folder_name?this.FileManagerStyles.updatableElements.fm_folder_name.push(c):this.FileManagerStyles.updatableElements.fm_folder_name=[c],r.append(d),o.append(r),o.append(h),o.append(c),s?a.setAttribute("path","/"):"/"===l?a.setAttribute("path",l+e.name):a.setAttribute("path",l+"/"+e.name),a.append(o),a.append(n),t.append(a),[r,o,a]}openCloseFolder(e){return i(this,arguments,void 0,(function*(e,t="nav"){let s=null==e?void 0:e.querySelector(".fm_folder_open_icon"),i=e.closest(".fm_folder_wrapper"),l=null==i?void 0:i.querySelector(".fm_folder_children"),a=e.querySelector(".fm_folder_name");if(!(null!=i&&null!=a&&null!=s&&s instanceof HTMLImageElement&&null!=l&&null!=l))throw new Error("The hierarchy of elements was violated");{let n=l.children;if((null==e?void 0:e.classList.contains("fm_opened"))&&"filelist"!==t){e.classList.remove("fm_opened"),this.FileManagerStyles.fmRemoveClass(e,"fm_opened"),s.src=this.iconsPaths.arrowRightFolders;for(const e of n)e instanceof HTMLElement&&(e.style.display="none")}else if(!(null==e?void 0:e.classList.contains("fm_opened")))if(null==e||e.classList.add("fm_opened"),this.FileManagerStyles.fmAddClass(e,"fm_opened"),s.src=this.iconsPaths.arrowDownFolder,0===n.length){if(!(null==a?void 0:a.textContent))throw new Error("The hierarchy of elements was violated");{let e=i.getAttribute("path");e&&(yield this.getInternalFolders(l,e),this.updateUpArrow(e),this.updateRemove(),this.updateDownload(),this.updateRename(),this.updateCopy(),this.updateCut(),this.updateBackArrow(),this.updateCreateFolderAndFiles())}}else for(const e of n){if(!(e instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");e.style.display="block"}}}))}handleOpenNavFolder(e){return i(this,void 0,void 0,(function*(){if(e.stopPropagation(),!(null!=e.target&&e.target instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");{let t=e.target.closest(".fm_folder_parent");if(!(null!=t&&t instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");yield this.openCloseFolder(t,"nav")}}))}focusNavFolder(e,t){var s;e!==this.currentFolder&&(this.currentFolder&&(null===(s=this.currentFolder)||void 0===s||s.classList.remove("fm_folder_parent__opened"),this.FileManagerStyles.fmRemoveClass(this.currentFolder,"fm_folder_parent__opened"),t||this.lastFolders.push(this.currentFolder)),null==e||e.classList.add("fm_folder_parent__opened"),this.FileManagerStyles.fmAddClass(e,"fm_folder_parent__opened"),this.FileManagerStyles.updatableElements.fm_folder_parent__opened=[e],this.currentFolder=e)}handleShowFileList(e){if(e.stopPropagation(),!(null!=e.target&&e.target instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");{let t=e.target;this.resetSearching(),this.updateFileList(t)}}updateListDisplayIcon(){this.displayModesElements&&"list"===this.filesDisplayMode?(this.displayModesElements.list.classList.add("fm_disabled"),this.displayModesElements.list.classList.add("fm_selected"),this.FileManagerStyles.fmAddClass(this.displayModesElements.list,"fm_disabled"),this.FileManagerStyles.fmAddClass(this.displayModesElements.list,"fm_selected"),this.displayModesElements.list.style.pointerEvents="none"):this.displayModesElements&&"list"!==this.filesDisplayMode&&(this.displayModesElements.list.classList.remove("fm_disabled"),this.displayModesElements.list.classList.remove("fm_selected"),this.FileManagerStyles.fmRemoveClass(this.displayModesElements.list,"fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.displayModesElements.list,"fm_selected"),this.displayModesElements.list.style.pointerEvents="auto")}updateTilesDisplayIcon(){this.displayModesElements&&"tiles"===this.filesDisplayMode?(this.displayModesElements.tiles.classList.add("fm_disabled"),this.displayModesElements.tiles.classList.add("fm_selected"),this.FileManagerStyles.fmAddClass(this.displayModesElements.tiles,"fm_disabled"),this.FileManagerStyles.fmAddClass(this.displayModesElements.tiles,"fm_selected"),this.displayModesElements.tiles.style.pointerEvents="none"):this.displayModesElements&&"tiles"!==this.filesDisplayMode&&(this.displayModesElements.tiles.classList.remove("fm_disabled"),this.displayModesElements.tiles.classList.remove("fm_selected"),this.FileManagerStyles.fmRemoveClass(this.displayModesElements.tiles,"fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.displayModesElements.tiles,"fm_selected"),this.displayModesElements.tiles.style.pointerEvents="auto")}handleListDisplayModeClick(e){"list"!==this.filesDisplayMode&&(localStorage.fmFilesDisplayMode="list",this.filesDisplayMode="list",this.files_listHTML.style.display="block",this.files_metadataHTML.style.display="flex",this.filesTilesElement.style.display="none",this.currentFolder instanceof HTMLElement&&this.updateFileList(this.currentFolder,!0),this.updateListDisplayIcon(),this.updateTilesDisplayIcon())}handleTilesDisplayModeClick(e){"tiles"!==this.filesDisplayMode&&(localStorage.fmFilesDisplayMode="tiles",this.filesDisplayMode="tiles",this.files_listHTML.style.display="none",this.files_metadataHTML.style.display="none",this.filesTilesElement.style.display="flex",this.currentFolder instanceof HTMLElement&&this.updateFileList(this.currentFolder,!0),this.updateListDisplayIcon(),this.updateTilesDisplayIcon())}updateBackArrow(){var e,t;(null===(t=null===(e=this.options)||void 0===e?void 0:e.addressPaneOptions)||void 0===t?void 0:t.backButtonEnabled)&&this.arrowsElements&&this.arrowsElements.back_arrow&&(this.arrowsElements&&this.lastFolders.length>0&&!this.arrowsState.back_arrow?(this.arrowsState.back_arrow=!0,this.arrowsElements.back_arrow.classList.remove("fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.arrowsElements.back_arrow,"fm_disabled"),this.arrowsElements.back_arrow.style.pointerEvents="auto"):this.arrowsElements&&0===this.lastFolders.length&&this.arrowsState.back_arrow&&(this.arrowsState.back_arrow=!1,this.arrowsElements.back_arrow.classList.add("fm_disabled"),this.FileManagerStyles.fmAddClass(this.arrowsElements.back_arrow,"fm_disabled"),this.arrowsElements.back_arrow.style.pointerEvents="none"))}updateUpArrow(e){var t,s;(null===(s=null===(t=this.options)||void 0===t?void 0:t.addressPaneOptions)||void 0===s?void 0:s.upButtonEnabled)&&this.arrowsElements&&this.arrowsElements.up_arrow&&(this.arrowsElements&&"/"!==e&&!this.arrowsState.up_arrow?(this.arrowsState.up_arrow=!0,this.arrowsElements.up_arrow.classList.remove("fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.arrowsElements.up_arrow,"fm_disabled"),this.arrowsElements.up_arrow.style.pointerEvents="auto"):this.arrowsElements&&"/"===e&&this.arrowsState.up_arrow&&(this.arrowsState.up_arrow=!1,this.arrowsElements.up_arrow.classList.add("fm_disabled"),this.FileManagerStyles.fmAddClass(this.arrowsElements.up_arrow,"fm_disabled"),this.arrowsElements.up_arrow.style.pointerEvents="none"))}updateCurrentPath(e){var t,s;if(this.currentPathElem){this.currentPathElem.innerHTML="";let i=e.split("/"),l=document.createElement("span");if(l.classList.add("fm_path_folder"),this.FileManagerStyles.fmAddClass(l,"fm_path_folder"),this.FileManagerStyles.updatableElements.fm_path_folder=[l],l.textContent=this.rootFolderName,this.currentPathElem.append(l),l.setAttribute("path2","/"),l.addEventListener("click",this.handleNavigationPathClick.bind(this)),""!==i[1])for(let e=1;e<i.length;e++){let l=document.createElement("img");l.classList.add("fm_path_arrow"),this.FileManagerStyles.fmAddClass(l,"fm_path_arrow"),l.src=this.iconsPaths.arrowRightNavigation;let a=document.createElement("span");a.classList.add("fm_path_folder"),this.FileManagerStyles.fmAddClass(a,"fm_path_folder"),this.FileManagerStyles.updatableElements.fm_path_folder.push(a),a.textContent=i[e],this.currentPathElem.append(l),this.currentPathElem.append(a);let n=null===(s=null===(t=a.previousElementSibling)||void 0===t?void 0:t.previousElementSibling)||void 0===s?void 0:s.getAttribute("path2");n&&("/"===n?a.setAttribute("path2",n+i[e]):a.setAttribute("path2",n+"/"+i[e]),a.addEventListener("click",this.handleNavigationPathClick.bind(this)))}}}handleNavigationPathClick(e){return i(this,void 0,void 0,(function*(){var t;if(e.stopPropagation(),e.target instanceof HTMLElement){let s=e.target.getAttribute("path2"),i=null===(t=this.mainPanel.querySelector(`[path="${s}"]`))||void 0===t?void 0:t.querySelector(".fm_folder_parent");s&&i instanceof HTMLElement&&(this.currentPath=s,this.resetSearching(),yield this.getInternalFiles(s),this.focusNavFolder(i,!1),this.updateUpArrow(s),this.clearCurrentFiles(),this.updateBackArrow(),this.updateCurrentPath(s))}}))}handleBackArrowClick(e){if(e.stopPropagation(),this.lastFolders.length>0){let e=this.lastFolders.pop();e&&(this.resetSearching(),this.updateFileList(e,!0))}}handleUpArrowClick(e){var t,s,i;if(e.stopPropagation(),this.currentFolder instanceof HTMLElement){let e=null===(i=null===(s=null===(t=this.currentFolder)||void 0===t?void 0:t.parentElement)||void 0===s?void 0:s.parentElement)||void 0===i?void 0:i.parentElement,l=null==e?void 0:e.querySelector(".fm_folder_parent");l instanceof HTMLElement&&(this.resetSearching(),this.updateFileList(l,!0))}}handleRefreshClick(e){return i(this,void 0,void 0,(function*(){this.updateInterface()}))}handleUploadClick(e){null!==this.uploadFilesPanel&&(this.uploadFilesPanel.classList.contains("fm_hidden")?(this.FileManagerStyles.fmRemoveClass(this.uploadFilesPanel,"fm_hidden"),this.uploadFilesPanel.classList.remove("fm_hidden")):(this.FileManagerStyles.fmAddClass(this.uploadFilesPanel,"fm_hidden"),this.uploadFilesPanel.classList.add("fm_hidden")))}handleSubmitSettings(e){var t,s,i,l,a;if(e.preventDefault(),(null===(i=null===(s=null===(t=this.options)||void 0===t?void 0:t.toolsPaneOptions)||void 0===s?void 0:s.settingsOptions)||void 0===i?void 0:i.settingsEnabled)&&this.settingsForm){let e={colors:{hover:this.settingsForm.hover_color.value,border:this.settingsForm.border_color.value,main_background:this.settingsForm.background_color.value,selected:this.settingsForm.select_color.value,text_color:this.settingsForm.text_color.value},sizing:{tools:this.settingsForm.tools.value,address:this.settingsForm.address.value,content_pane:this.settingsForm.content_pane.value,navigation_pane:this.settingsForm.navigation_pane.value,settings_panel:this.settingsForm.settings_panel.value}};this.FileManagerStyles.setMutableStyles(e),this.FileManagerStyles.updateMutableStyles(),this.FileManagerStyles.updateFileManagerStyles(),this.FileManagerStyles.updateFileManagerHeaderStyles(),this.FileManagerStyles.updateHeaderStyles(),this.FileManagerStyles.updateUpdatableElements(),this.mainPanel.style.display="none",null!==this.toolsPane&&(this.toolsPane.style.display="none"),(null===(a=null===(l=this.options)||void 0===l?void 0:l.addressPaneOptions)||void 0===a?void 0:a.addressPaneEnabled)&&null!==this.addressPane&&(this.addressPane.style.display="none"),null!==this.uploadFilesPanel&&this.FileManagerStyles.fmAddClass(this.uploadFilesPanel,"fm_hidden");let t=this.filemanager_root.querySelector(".fm_message_submit");t instanceof HTMLElement&&(t.textContent=this.translations[this.currentLang].Success,setTimeout((()=>{t.textContent=""}),2e3))}}handleResetSettings(e){var t,s;if(e.preventDefault(),window.confirm(this.translations[this.currentLang]["Are you sure you want to reset?"])){let e=this.FileManagerStyles.getDefaultMutableStyles();this.FileManagerStyles.setMutableStyles(e),this.FileManagerStyles.updateMutableStyles(),this.FileManagerStyles.updateFileManagerStyles(),this.FileManagerStyles.updateFileManagerHeaderStyles(),this.FileManagerStyles.updateHeaderStyles(),this.FileManagerStyles.updateUpdatableElements(),this.updateSettingsColorInputs(),this.updateSettingsInterfaceSelects(),this.mainPanel.style.display="none",null!==this.toolsPane&&(this.toolsPane.style.display="none"),(null===(s=null===(t=this.options)||void 0===t?void 0:t.addressPaneOptions)||void 0===s?void 0:s.addressPaneEnabled)&&this.addressPane&&(this.addressPane.style.display="none"),null!==this.uploadFilesPanel&&this.FileManagerStyles.fmAddClass(this.uploadFilesPanel,"fm_hidden");let i=this.filemanager_root.querySelector(".fm_message_submit");i instanceof HTMLElement&&(i.textContent=this.translations[this.currentLang].Success,setTimeout((()=>{i.textContent=""}),2e3))}}handleSearchChange(e){return i(this,void 0,void 0,(function*(){this.searchInputElement&&this.searchInputElement.value&&""!==this.searchInputElement.value&&(this.searchingString=this.searchInputElement.value,yield this.getInternalFiles(this.currentPath),this.updateCreateFolderAndFiles())}))}updateFileList(e){return i(this,arguments,void 0,(function*(e,t=!1){let s=e.closest(".fm_folder_wrapper");if(s){let e=null==s?void 0:s.querySelector(".fm_folder_parent");if(e instanceof HTMLElement){let i=s.getAttribute("path");i&&(this.currentPath=i,yield this.getInternalFiles(i),this.focusNavFolder(e,t),this.updateUpArrow(i),this.clearCurrentFiles(),this.updateBackArrow(),this.updateCurrentPath(i))}}}))}resetSearching(){var e,t;(null===(t=null===(e=this.options)||void 0===e?void 0:e.addressPaneOptions)||void 0===t?void 0:t.searchingEnabled)&&this.searchInputElement&&(this.searchingString="",this.searchInputElement.value="")}handleUploadingFile(e){return i(this,void 0,void 0,(function*(){e.preventDefault();let t=this.filemanager_root.querySelector(".fm_upload_file_func_input");if(t instanceof HTMLInputElement&&t.files){const e=t.files[0];if(!e)return;try{yield this.FileManagerServer.uploadFile(e,this.currentPath)}catch(e){throw e}this.resetSearching(),yield this.getInternalFiles(this.currentPath),this.updateUpArrow(this.currentPath),this.updateRemove(),this.updateDownload(),this.updateRename(),this.updateCopy(),this.updateCut(),this.updateInsert(),this.updateCreateFolderAndFiles(),this.updateCurrentPath(this.currentPath),this.updateBackArrow(),t.value=""}}))}openPreviousFolders(){return i(this,void 0,void 0,(function*(){for(let e=0;e<this.openFolders.length;e++){let t=this.filemanager_root.querySelector(`[path="${this.openFolders[e]}"]`),s=null==t?void 0:t.querySelector(".fm_folder_parent");s instanceof HTMLElement&&(yield this.openCloseFolder(s))}this.openFolders=[]}))}searchOpenFoldersStart(){let e=this.filemanager_root.querySelector(".fm_folder_root_wrapper"),t=null==e?void 0:e.querySelector(".fm_folder_children"),s=null==t?void 0:t.children;if(s)for(let e=0;e<s.length;e++)this.searchOpenFoldersRecursion(s[e])}searchOpenFoldersRecursion(e){let t=null==e?void 0:e.querySelector(".fm_folder_children"),s=null==t?void 0:t.children,i=null==e?void 0:e.querySelector(".fm_folder_parent");if(i&&i.classList.contains("fm_opened")&&e instanceof HTMLElement){let t=e.getAttribute("path");t&&this.openFolders.push(t)}if(s)for(let e=0;e<s.length;e++)this.searchOpenFoldersRecursion(s[e])}updateNavFolders(){return i(this,void 0,void 0,(function*(){let e=this.filemanager_root.querySelector(".fm_folder_root_wrapper"),t=null==e?void 0:e.querySelector(".fm_folder_parent"),s=null==e?void 0:e.querySelector(".fm_folder_children"),i=null==t?void 0:t.querySelector(".fm_folder_open_icon");if(t instanceof HTMLElement&&s&&i instanceof HTMLImageElement){let e=this.currentPath;this.searchOpenFoldersStart(),s.innerHTML="",(null==t?void 0:t.classList.contains("fm_opened"))?(t.classList.remove("fm_opened"),this.FileManagerStyles.fmRemoveClass(t,"fm_opened"),i.src=this.iconsPaths.arrowRightFolders):(null==t?void 0:t.classList.contains("fm_opened"))||(null==t||t.classList.add("fm_opened"),this.FileManagerStyles.fmAddClass(t,"fm_opened"),i.src=this.iconsPaths.arrowDownFolder),yield this.openCloseFolder(t,"nav"),yield this.openPreviousFolders(),this.currentPath=e;let l=this.filemanager_root.querySelector(`[path="${this.currentPath}"]`);if(l instanceof HTMLElement)this.currentFolder=l;else{this.currentPath="/";let e=this.filemanager_root.querySelector(`[path="${this.currentPath}"]`);e instanceof HTMLElement&&(this.currentFolder=e)}}}))}handleUploadingFolder(e){return i(this,void 0,void 0,(function*(){e.preventDefault();let t=this.filemanager_root.querySelector(".fm_upload_files_func_input");if(t instanceof HTMLInputElement&&t.files){const e=t.files;if(0===e.length)return;try{yield this.FileManagerServer.uploadFolder(e,this.currentPath)}catch(e){throw e}t.value="",yield this.updateNavFolders(),this.currentFolder instanceof HTMLElement&&(this.resetSearching(),this.updateFileList(this.currentFolder))}}))}handleOpenFileListFolder(e){return i(this,void 0,void 0,(function*(){var t,s,i,l;if(e.stopPropagation(),null!=e.target&&e.target instanceof HTMLElement){null!=this.currentFolder&&(yield this.openCloseFolder(this.currentFolder,"filelist"));let a=e.target.closest(".fm_file_block"),n=null==a?void 0:a.querySelector(".fm_file_name"),o=null===(t=this.currentFolder)||void 0===t?void 0:t.parentElement,r=null===(s=null==o?void 0:o.querySelector(".fm_folder_children"))||void 0===s?void 0:s.children;if(null==a||null==n||null==o||!(null==n?void 0:n.textContent)||null==r)throw new Error("The hierarchy of elements was violated");{let e,t;for(let s of r)if((null===(i=null==s?void 0:s.querySelector(".fm_folder_name"))||void 0===i?void 0:i.textContent)===(null==n?void 0:n.textContent)){e=null==s?void 0:s.querySelector(".fm_folder_parent"),t=s;break}if(!(e&&e instanceof HTMLElement&&null!=t&&t instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");{let s=t.getAttribute("path");s&&this.currentFolder&&(this.currentPath=s,null===(l=this.currentFolder)||void 0===l||l.classList.remove("fm_folder_parent__opened"),this.FileManagerStyles.fmRemoveClass(this.currentFolder,"fm_folder_parent__opened"),e.classList.add("fm_folder_parent__opened"),this.FileManagerStyles.fmAddClass(e,"fm_folder_parent__opened"),this.currentFolder&&this.lastFolders.push(this.currentFolder),this.currentFolder=e,null!=this.files_listHTML&&(this.files_listHTML.innerHTML="",yield this.getInternalFiles(s),this.updateUpArrow(s),this.updateCurrentPath(s),this.updateBackArrow(),this.clearCurrentFiles()))}}}}))}updateRemove(){null!==this.toolsElements&&this.toolsElements&&this.toolsElements.remove&&(this.currentFilesPaths.length>0?(this.toolsState.remove=!0,this.toolsElements.remove.classList.remove("fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.toolsElements.remove,"fm_disabled"),this.toolsElements.remove.style.pointerEvents="auto"):(this.toolsState.remove=!1,this.toolsElements.remove.classList.add("fm_disabled"),this.FileManagerStyles.fmAddClass(this.toolsElements.remove,"fm_disabled"),this.toolsElements.remove.style.pointerEvents="none"))}updateDownload(){null!==this.toolsElements&&this.toolsElements&&this.toolsElements.download&&(this.currentFilesPaths.length>0?(this.toolsState.download=!0,this.toolsElements.download.classList.remove("fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.toolsElements.download,"fm_disabled"),this.toolsElements.download.style.pointerEvents="auto"):(this.toolsState.download=!1,this.toolsElements.download.classList.add("fm_disabled"),this.FileManagerStyles.fmAddClass(this.toolsElements.download,"fm_disabled"),this.toolsElements.download.style.pointerEvents="none"))}updateCreateFolderAndFiles(){null!==this.toolsElements&&this.toolsElements&&this.toolsElements.createFile&&this.toolsElements.createFolder&&(this.currentPath&&""===this.searchingString?(this.toolsState.createFile=!0,this.toolsState.createFolder=!0,this.toolsElements.createFile.classList.remove("fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.toolsElements.createFile,"fm_disabled"),this.toolsElements.createFile.style.pointerEvents="auto",this.toolsElements.createFolder.classList.remove("fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.toolsElements.createFolder,"fm_disabled"),this.toolsElements.createFolder.style.pointerEvents="auto"):(this.toolsState.createFile=!1,this.toolsState.createFolder=!1,this.toolsElements.createFile.classList.add("fm_disabled"),this.FileManagerStyles.fmAddClass(this.toolsElements.createFile,"fm_disabled"),this.toolsElements.createFile.style.pointerEvents="none",this.toolsElements.createFolder.classList.add("fm_disabled"),this.FileManagerStyles.fmAddClass(this.toolsElements.createFolder,"fm_disabled"),this.toolsElements.createFolder.style.pointerEvents="none"))}updateRename(){null!==this.toolsElements&&this.toolsElements&&this.toolsElements.rename&&(1===this.currentFilesPaths.length?(this.toolsState.rename=!0,this.toolsElements.rename.classList.remove("fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.toolsElements.rename,"fm_disabled"),this.toolsElements.rename.style.pointerEvents="auto"):(this.toolsState.rename=!1,this.toolsElements.rename.classList.add("fm_disabled"),this.FileManagerStyles.fmAddClass(this.toolsElements.rename,"fm_disabled"),this.toolsElements.rename.style.pointerEvents="none"))}updateCopy(){null!==this.toolsElements&&this.toolsElements&&this.toolsElements.copy&&(this.currentFilesPaths.length>0&&""===this.searchingString?(this.toolsState.copy=!0,this.toolsElements.copy.classList.remove("fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.toolsElements.copy,"fm_disabled"),this.toolsElements.copy.style.pointerEvents="auto"):(this.toolsState.copy=!1,this.toolsElements.copy.classList.add("fm_disabled"),this.FileManagerStyles.fmAddClass(this.toolsElements.copy,"fm_disabled"),this.toolsElements.copy.style.pointerEvents="none"),this.updateInsert())}updateCut(){null!==this.toolsElements&&this.toolsElements&&this.toolsElements.cut&&(this.currentFilesPaths.length>0&&""===this.searchingString?(this.toolsState.cut=!0,this.toolsElements.cut.classList.remove("fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.toolsElements.cut,"fm_disabled"),this.toolsElements.cut.style.pointerEvents="auto"):(this.toolsState.cut=!1,this.toolsElements.cut.classList.add("fm_disabled"),this.FileManagerStyles.fmAddClass(this.toolsElements.cut,"fm_disabled"),this.toolsElements.cut.style.pointerEvents="none"),this.updateInsert())}updateInsert(){null!==this.toolsElements&&this.toolsElements&&this.toolsElements.insert&&(this.selectedFilesPaths.length>0&&""===this.searchingString?(this.toolsState.insert=!0,this.toolsElements.insert.classList.remove("fm_disabled"),this.FileManagerStyles.fmRemoveClass(this.toolsElements.insert,"fm_disabled"),this.toolsElements.insert.style.pointerEvents="auto"):(this.toolsState.insert=!1,this.toolsElements.insert.classList.add("fm_disabled"),this.FileManagerStyles.fmAddClass(this.toolsElements.insert,"fm_disabled"),this.toolsElements.insert.style.pointerEvents="none"))}clearCurrentFiles(){this.currentFiles.forEach((e=>{e.classList.remove("fm_openedFile"),this.FileManagerStyles.fmRemoveClass(e,"fm_openedFile")})),this.currentFiles=[],this.currentFilesPaths=[],this.lastFile=null,this.updateRemove(),this.updateDownload(),this.updateRename(),this.updateCopy(),this.updateCreateFolderAndFiles(),this.updateCut()}handleFilemanagerClick(e){e.target instanceof HTMLElement&&!e.target.closest(".fm_file_block")&&this.clearCurrentFiles()}handleRemoveClick(e){return i(this,void 0,void 0,(function*(){e.stopPropagation();let t=window.confirm(this.translations[this.currentLang]["Are you sure you want to delete?"]);if(this.currentFilesPaths.length>0&&t)try{if(yield this.currentFilesPaths.forEach((e=>i(this,void 0,void 0,(function*(){yield this.FileManagerServer.removeFileOrFolder(e)})))),!(this.currentFolder instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");yield this.updateNavFolders(),this.updateFileList(this.currentFolder,!0)}catch(e){throw e}}))}handleDownloadClick(e){return i(this,void 0,void 0,(function*(){if(e.stopPropagation(),window.confirm(this.translations[this.currentLang]["Are you sure you want to download?"]))try{if(yield this.FileManagerServer.downloadFiles(this.currentFilesPaths),!(this.currentFolder instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");yield this.updateNavFolders(),this.updateFileList(this.currentFolder,!0)}catch(e){throw e}}))}handleRenameClick(e){return i(this,void 0,void 0,(function*(){var t;if(e.stopPropagation(),1===this.currentFiles.length){const e=null===(t=this.currentFiles[0])||void 0===t?void 0:t.querySelector(".fm_file_name");if(e instanceof HTMLElement&&e.textContent){const t=document.createElement("input");t.value=e.textContent,t.classList.add("fm_file_name"),t.style.height="80%",t.style.width="80%",t.style.resize="None","tiles"===this.filesDisplayMode?this.FileManagerStyles.fmAddClass(t,"fm_file_name_tiles"):(this.FileManagerStyles.fmAddClass(t,"fm_file_name"),this.FileManagerStyles.fmAddClass(t,"fm_file_metadata")),t.style.color="black",this.currentFiles[0].replaceChild(t,e),t.focus();let s=this;t.addEventListener("blur",(function(){return i(this,void 0,void 0,(function*(){const i=document.createElement("span");if(i.textContent=t.value,i.classList.add("fm_file_name"),i.classList.add("fm_file_metadata"),"tiles"===s.filesDisplayMode?s.FileManagerStyles.fmAddClass(i,"fm_file_name_tiles"):(s.FileManagerStyles.fmAddClass(i,"fm_file_name"),s.FileManagerStyles.fmAddClass(i,"fm_file_metadata")),s.currentFiles[0]instanceof HTMLElement){if(s.currentFiles[0].replaceChild(i,t),e.textContent===t.value)return;try{if(""!==s.searchingString){let e=s.currentFilesPaths[0].split("/").slice(0,-1).join("/")+"/"+i.textContent;yield s.FileManagerServer.renameFileOrFolder(`${s.currentFilesPaths[0]}`,`${e}`)}else"/"===s.currentPath?yield s.FileManagerServer.renameFileOrFolder(s.currentFilesPaths[0],`/${i.textContent}`):yield s.FileManagerServer.renameFileOrFolder(s.currentFilesPaths[0],`${s.currentPath}/${i.textContent}`);if(!(s.currentFolder instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");yield s.updateNavFolders(),s.updateFileList(s.currentFolder,!0)}catch(e){throw e}}}))}))}}}))}handleCopyClick(e){e.stopPropagation(),this.copyFiles()}handleCutClick(e){e.stopPropagation(),this.cutFiles()}copyFiles(){return i(this,void 0,void 0,(function*(){var e,t,s;(null===(s=null===(t=null===(e=this.options)||void 0===e?void 0:e.toolsPaneOptions)||void 0===t?void 0:t.toolsEnabled)||void 0===s?void 0:s.movingFiles)&&""===this.searchingString&&(this.selectedFilesPaths=[],this.currentFilesPaths.length>0&&(this.currentFilesPaths.forEach((e=>{this.selectedFilesPaths.push(e)})),this.cutState=!1,this.copyState=!0,this.updateInsert()))}))}insertFiles(){return i(this,void 0,void 0,(function*(){var e,t,s;if((null===(s=null===(t=null===(e=this.options)||void 0===e?void 0:e.toolsPaneOptions)||void 0===t?void 0:t.toolsEnabled)||void 0===s?void 0:s.movingFiles)&&""===this.searchingString&&this.selectedFilesPaths.length>0)if(this.copyState)try{yield this.selectedFilesPaths.forEach((e=>i(this,void 0,void 0,(function*(){let t=e.split("/"),s=t[t.length-1];if(!this.currentPath.includes(e)){if(yield this.FileManagerServer.copyFileOrFolder(`${e}`,`${this.currentPath}/${s}`),!(this.currentFolder instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");yield this.updateNavFolders(),this.updateFileList(this.currentFolder,!0)}}))))}catch(e){throw e}else if(this.cutState)try{if(yield this.selectedFilesPaths.forEach((e=>i(this,void 0,void 0,(function*(){let t=e.split("/"),s=t[t.length-1];this.currentPath.includes(e)||"/"===this.currentPath&&e===`/${s}`||e!==`${this.currentPath}/${s}`&&(yield this.FileManagerServer.copyFileOrFolder(`${e}`,`${this.currentPath}/${s}`),yield this.FileManagerServer.removeFileOrFolder(`${e}`))})))),!(this.currentFolder instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");yield this.updateNavFolders(),this.updateFileList(this.currentFolder,!0)}catch(e){throw e}}))}cutFiles(){return i(this,void 0,void 0,(function*(){var e,t,s;(null===(s=null===(t=null===(e=this.options)||void 0===e?void 0:e.toolsPaneOptions)||void 0===t?void 0:t.toolsEnabled)||void 0===s?void 0:s.movingFiles)&&""===this.searchingString&&(this.selectedFilesPaths=[],this.currentFilesPaths.length>0&&(this.currentFilesPaths.forEach((e=>{this.selectedFilesPaths.push(e)})),this.copyState=!1,this.cutState=!0,this.updateInsert()))}))}handleInsertClick(e){return i(this,void 0,void 0,(function*(){e.stopPropagation(),yield this.insertFiles()}))}handleSettingsClick(){var e,t,s,i,l,a,n;(null===(s=null===(t=null===(e=this.options)||void 0===e?void 0:e.toolsPaneOptions)||void 0===t?void 0:t.settingsOptions)||void 0===s?void 0:s.settingsEnabled)&&this.settingsPanel&&("block"===this.settingsPanel.style.display?(this.settingsPanel.style.display="none",this.mainPanel.style.display="flex",null!==this.toolsPane&&(this.toolsPane.style.display="flex"),(null===(l=null===(i=this.options)||void 0===i?void 0:i.addressPaneOptions)||void 0===l?void 0:l.addressPaneEnabled)&&this.addressPane&&(this.addressPane.style.display="flex")):(this.settingsPanel.style.display="block",this.mainPanel.style.display="none",null!==this.toolsPane&&(this.toolsPane.style.display="none"),(null===(n=null===(a=this.options)||void 0===a?void 0:a.addressPaneOptions)||void 0===n?void 0:n.addressPaneEnabled)&&this.addressPane&&(this.addressPane.style.display="none")))}handleKeyDown(e){return i(this,void 0,void 0,(function*(){e.ctrlKey&&"c"===e.key?this.copyFiles():e.ctrlKey&&"v"===e.key?yield this.insertFiles():e.ctrlKey&&"x"===e.key&&this.cutFiles()}))}handleInsert(e){""===this.searchingString&&(this.selectedFilesPaths=[],this.currentFilesPaths.length>0&&(this.currentFilesPaths.forEach((e=>{this.selectedFilesPaths.push(e)})),this.cutState=!1,this.copyState=!0,this.updateInsert()))}handleFileClick(e){if(e.target instanceof HTMLElement){e.ctrlKey||e.shiftKey||this.currentFiles.forEach((e=>{this.FileManagerStyles.fmRemoveClass(e,"fm_openedFile"),e.classList.remove("fm_openedFile")}));const t=e.target.closest(".fm_file_block");if(t instanceof HTMLDivElement){if(t.classList.contains("fm_openedFile")){this.FileManagerStyles.fmRemoveClass(t,"fm_openedFile"),t.classList.remove("fm_openedFile");let e=this.currentFiles.indexOf(t);-1!==e&&this.currentFiles.splice(e,1);const s=t.querySelector(".fm_file_name");if(s instanceof HTMLElement&&s.textContent)if(""!==this.searchingString){let e=this.currentFilesPaths.indexOf(t.title);-1!==e&&this.currentFiles.splice(e,1)}else{let e="/"===this.currentPath?"/"+s.textContent:this.currentPath+"/"+s.textContent,t=this.currentFilesPaths.indexOf(e);-1!==t&&this.currentFiles.splice(t,1)}}else if(e.shiftKey&&this.lastFile){let e;e="list"===this.filesDisplayMode?this.files_listHTML.children:this.filesTilesElement.children;let s=!1;for(const i of e){let e=i;if(e===t){if(s){const t=e.querySelector(".fm_file_name");if(t instanceof HTMLElement&&t.textContent)if(this.currentFiles.push(e),this.FileManagerStyles.fmAddClass(e,"fm_openedFile"),e.classList.add("fm_openedFile"),""===this.searchingString||this.currentFilesPaths.includes(e.title)){let e="/"===this.currentPath?"/"+t.textContent:this.currentPath+"/"+t.textContent;this.currentFilesPaths.includes(e)||this.currentFilesPaths.push(e)}else this.currentFilesPaths.push(e.title);s=!1;break}s=!0}if(s){const s=e.querySelector(".fm_file_name");if(s instanceof HTMLElement&&s.textContent)if(this.currentFiles.push(e),this.FileManagerStyles.fmAddClass(e,"fm_openedFile"),e.classList.add("fm_openedFile"),""===this.searchingString||this.currentFilesPaths.includes(e.title)){let e="/"===this.currentPath?"/"+s.textContent:this.currentPath+"/"+s.textContent;this.currentFilesPaths.includes(e)||this.currentFilesPaths.push(e)}else this.currentFilesPaths.push(t.title)}if(e===this.lastFile){if(s){s=!1;break}s=!0}}}else{this.FileManagerStyles.fmAddClass(t,"fm_openedFile"),t.classList.add("fm_openedFile");const s=t.querySelector(".fm_file_name");if(s instanceof HTMLElement&&s.textContent)if(e.ctrlKey)if(this.currentFiles.push(t),this.lastFile=t,""!==this.searchingString)this.currentFilesPaths.push(t.title);else{let e="/"===this.currentPath?"/"+s.textContent:this.currentPath+"/"+s.textContent;this.currentFilesPaths.push(e)}else if(this.currentFiles=[t],this.lastFile=t,""!==this.searchingString)this.currentFilesPaths=[t.title];else{let e="/"===this.currentPath?"/"+s.textContent:this.currentPath+"/"+s.textContent;this.currentFilesPaths=[e]}}this.updateRemove(),this.updateDownload(),this.updateRename(),this.updateCopy(),this.updateCut()}}}getInternalFolders(e,t){return i(this,void 0,void 0,(function*(){let s;try{s=yield this.FileManagerServer.getFolders(t)}catch(e){throw e}null!=s&&s.forEach((t=>{var s,i;let l=this.createHTMLNavFolder(t,e);l&&(null===(s=l[0])||void 0===s||s.addEventListener("click",this.handleOpenNavFolder.bind(this)),null===(i=l[1])||void 0===i||i.addEventListener("click",this.handleShowFileList.bind(this)))}))}))}startLoading(){this.loaderElem.style.display="flex",this.filesTilesElement.style.display="none",this.files_listHTML.style.display="none",this.files_metadataHTML.style.display="none"}endLoading(){this.loaderElem.style.display="none","list"===this.filesDisplayMode?(this.files_listHTML.style.display="block",this.files_metadataHTML.style.display="flex"):"tiles"===this.filesDisplayMode&&(this.filesTilesElement.style.display="flex")}getInternalFiles(e){return i(this,void 0,void 0,(function*(){let t;this.startLoading();try{t=""===this.searchingString?yield this.FileManagerServer.getFiles(e):yield this.FileManagerServer.searchFiles(this.searchingString,e)}catch(e){throw e}if(this.endLoading(),null!=t&&this.files_listHTML)if("list"===this.filesDisplayMode){if(this.files_listHTML.innerHTML="",0===t.length){let e=document.createElement("span");e.textContent=this.translations[this.currentLang]["This folder is empty."],this.FileManagerStyles.fmAddClass(e,"fm_empty_message"),this.files_listHTML.append(e)}t.forEach((e=>{var t,s,i;if(""===this.searchingString){let l;l=(null===(i=null===(s=null===(t=this.options)||void 0===t?void 0:t.toolsPaneOptions)||void 0===s?void 0:s.toolsEnabled)||void 0===i?void 0:i.movingFiles)?this.createHTMLFileList(e,!0):this.createHTMLFileList(e,!1),e.isFolder&&l.addEventListener("dblclick",this.handleOpenFileListFolder.bind(this))}else{let t=this.createHTMLFileList(e,!1);e.path&&(t.title=e.path)}}))}else if("tiles"===this.filesDisplayMode){if(this.filesTilesElement.innerHTML="",0===t.length){let e=document.createElement("span");e.textContent=this.translations[this.currentLang]["This folder is empty."],this.FileManagerStyles.fmAddClass(e,"fm_empty_message"),this.filesTilesElement.append(e)}t.forEach((e=>{var t,s,i;if(""===this.searchingString){let l;l=(null===(i=null===(s=null===(t=this.options)||void 0===t?void 0:t.toolsPaneOptions)||void 0===s?void 0:s.toolsEnabled)||void 0===i?void 0:i.movingFiles)?this.createHTMLFileTiles(e,!0):this.createHTMLFileTiles(e,!1),e.isFolder&&l.addEventListener("dblclick",this.handleOpenFileListFolder.bind(this))}else{let t=this.createHTMLFileTiles(e,!1);e.path&&(t.title=e.path)}}))}}))}updateSettingsColorInputs(){for(let e in this.settingsColorInput)this.settingsColorInput[e].value=this.FileManagerStyles.fileManagerMutableStyles.colors[e]}updateSettingsInterfaceSelects(){for(let e in this.settingsInterfaceSelect){let t=this.settingsInterfaceSelect[e].children;for(let s=0;s<t.length;s++){let i=t[s];i.value===this.FileManagerStyles.fileManagerMutableStyles.sizing[e]&&(i.selected=!0)}}}handleFilesDragStart(e){var t,s,i,l;if(""!==this.searchingString||!(null===(i=null===(s=null===(t=this.options)||void 0===t?void 0:t.toolsPaneOptions)||void 0===s?void 0:s.toolsEnabled)||void 0===i?void 0:i.movingFiles))return;let a=e.target.closest(".fm_file_block");if(a instanceof HTMLElement&&this.currentPath){let e=null===(l=a.querySelector(".fm_file_name"))||void 0===l?void 0:l.textContent;if(!e)return;"/"===this.currentPath?this.currentDragPath=`${this.currentPath}${e}`:this.currentDragPath=`${this.currentPath}/${e}`,this.currentStartDragElement=a}}handleFilesDragOver(e){var t,s,i,l,a,n,o;if(""!==this.searchingString||!(null===(i=null===(s=null===(t=this.options)||void 0===t?void 0:t.toolsPaneOptions)||void 0===s?void 0:s.toolsEnabled)||void 0===i?void 0:i.movingFiles))return;e.preventDefault();let r=e.target,d=r.closest(".fm_file_block"),h=r.closest(".fm_folder_parent");if(d instanceof HTMLElement&&this.currentPath&&this.currentStartDragElement!==d&&!this.currentFiles.includes(d)){if("true"===d.getAttribute("isfolder")){this.currentDragingElement=d;let e=d.querySelector(".fm_file_icon");if(e instanceof HTMLImageElement){e.src=null===(a=null===(l=this.options)||void 0===l?void 0:l.icons)||void 0===a?void 0:a.openedFolder,this.FileManagerStyles.fmAddClass(d,"fm_selected");let t=this.currentDragingElement;setTimeout((()=>{var s,i;this.currentDragingElement!==t&&(this.FileManagerStyles.fmRemoveClass(d,"fm_selected"),e.src=null===(i=null===(s=this.options)||void 0===s?void 0:s.icons)||void 0===i?void 0:i.folder)}),100)}}}else if(h instanceof HTMLElement&&this.currentPath){this.currentDragingElement=h;let e=h.querySelector(".fm_folder_icon");if(e instanceof HTMLImageElement){e.src=null===(o=null===(n=this.options)||void 0===n?void 0:n.icons)||void 0===o?void 0:o.openedFolder,this.FileManagerStyles.fmAddClass(h,"fm_selected");let t=this.currentDragingElement;setTimeout((()=>{var s,i;this.currentDragingElement!==t&&(this.FileManagerStyles.fmRemoveClass(h,"fm_selected"),e.src=null===(i=null===(s=this.options)||void 0===s?void 0:s.icons)||void 0===i?void 0:i.folder)}),100)}}}handleFilesDragLeave(e){e.preventDefault(),this.currentDragingElement=null}handleFilesDrop(e){return i(this,void 0,void 0,(function*(){var t,s,l,a,n,o,r,d,h,c,m,f,u,p;if(""!==this.searchingString||!(null===(l=null===(s=null===(t=this.options)||void 0===t?void 0:t.toolsPaneOptions)||void 0===s?void 0:s.toolsEnabled)||void 0===l?void 0:l.movingFiles))return;let g=e.target,_=g.closest(".fm_file_block"),v=g.closest(".fm_folder_parent"),y=null==v?void 0:v.parentElement;if(this.currentStartDragElement instanceof HTMLElement&&_ instanceof HTMLElement&&this.currentPath&&this.currentDragPath&&!this.currentFiles.includes(_)){let e,t=null===(a=_.querySelector(".fm_file_name"))||void 0===a?void 0:a.textContent;if(!t){let e=_.querySelector(".fm_file_icon");return e instanceof HTMLImageElement&&(e.src=null===(o=null===(n=this.options)||void 0===n?void 0:n.icons)||void 0===o?void 0:o.folder),void this.FileManagerStyles.fmRemoveClass(_,"fm_selected")}if(e="/"===this.currentPath?`${this.currentPath}${t}`:`${this.currentPath}/${t}`,-1===this.currentFiles.indexOf(this.currentStartDragElement)){if(e===this.currentDragPath||"false"===_.getAttribute("isFolder")){let e=_.querySelector(".fm_file_icon");return e instanceof HTMLImageElement&&(e.src=null===(d=null===(r=this.options)||void 0===r?void 0:r.icons)||void 0===d?void 0:d.folder),void this.FileManagerStyles.fmRemoveClass(_,"fm_selected")}let t=this.currentDragPath.split("/"),s=t[t.length-1],i=`${e}/${s}`;if(this.currentDragPath==i)return;if(e.includes(this.currentDragPath)){let e=_.querySelector(".fm_file_icon");return e instanceof HTMLImageElement&&(e.src=null===(c=null===(h=this.options)||void 0===h?void 0:h.icons)||void 0===c?void 0:c.folder),void this.FileManagerStyles.fmRemoveClass(_,"fm_selected")}yield this.FileManagerServer.copyFileOrFolder(this.currentDragPath,i),yield this.FileManagerServer.removeFileOrFolder(this.currentDragPath)}else yield this.currentFilesPaths.forEach((t=>i(this,void 0,void 0,(function*(){var s,i,l,a;if(e===t||"false"===_.getAttribute("isFolder")){let e=_.querySelector(".fm_file_icon");return e instanceof HTMLImageElement&&(e.src=null===(i=null===(s=this.options)||void 0===s?void 0:s.icons)||void 0===i?void 0:i.folder),void this.FileManagerStyles.fmRemoveClass(_,"fm_selected")}let n=t.split("/"),o=n[n.length-1],r=`${e}/${o}`;if(t!=r){if(e.includes(t)){let e=_.querySelector(".fm_file_icon");return e instanceof HTMLImageElement&&(e.src=null===(a=null===(l=this.options)||void 0===l?void 0:l.icons)||void 0===a?void 0:a.folder),void this.FileManagerStyles.fmRemoveClass(_,"fm_selected")}yield this.FileManagerServer.copyFileOrFolder(t,r),yield this.FileManagerServer.removeFileOrFolder(t)}}))));if(!(this.currentFolder instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");yield this.updateNavFolders(),this.updateFileList(this.currentFolder,!0)}else{if(!(this.currentStartDragElement instanceof HTMLElement&&v instanceof HTMLElement&&y instanceof HTMLElement&&this.currentDragPath))throw new Error("The hierarchy of elements was violated");if(y.classList.contains("fm_folder_root_wrapper")){this.FileManagerStyles.fmRemoveClass(v,"fm_selected");let e=v.querySelector(".fm_folder_icon");e instanceof HTMLImageElement&&(e.src=null===(f=null===(m=this.options)||void 0===m?void 0:m.icons)||void 0===f?void 0:f.folder)}if(-1===this.currentFiles.indexOf(this.currentStartDragElement)){let e,t=y.getAttribute("path"),s=this.currentDragPath.split("/"),i=s[s.length-1];if(e="/"===t?`/${i}`:`${t}/${i}`,null!==t&&t.includes(this.currentDragPath)){this.FileManagerStyles.fmRemoveClass(v,"fm_selected");let e=v.querySelector(".fm_folder_icon");return void(e instanceof HTMLImageElement&&(e.src=null===(p=null===(u=this.options)||void 0===u?void 0:u.icons)||void 0===p?void 0:p.folder))}if(this.currentDragPath==e)return;if(this.currentFilesPaths.includes(e))return;yield this.FileManagerServer.copyFileOrFolder(this.currentDragPath,e),yield this.FileManagerServer.removeFileOrFolder(this.currentDragPath)}else yield this.currentFilesPaths.forEach((e=>i(this,void 0,void 0,(function*(){var t,s;let i,l=y.getAttribute("path"),a=e.split("/"),n=a[a.length-1];if(i="/"===l?`/${n}`:`${l}/${n}`,null!==l&&l.includes(e)){this.FileManagerStyles.fmRemoveClass(v,"fm_selected");let e=v.querySelector(".fm_folder_icon");e instanceof HTMLImageElement&&(e.src=null===(s=null===(t=this.options)||void 0===t?void 0:t.icons)||void 0===s?void 0:s.folder)}else e!=i&&(yield this.FileManagerServer.copyFileOrFolder(e,i),yield this.FileManagerServer.removeFileOrFolder(e))}))));if(!(this.currentFolder instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");yield this.updateNavFolders(),this.updateFileList(this.currentFolder,!0)}}))}handleCreateFileClick(e){return i(this,void 0,void 0,(function*(){if(""===this.searchingString&&this.currentPath){if(yield this.FileManagerServer.createEmptyFile(this.currentPath),!(this.currentFolder instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");yield this.updateNavFolders(),this.updateFileList(this.currentFolder,!0)}}))}handleCreateFolderClick(e){return i(this,void 0,void 0,(function*(){if(""===this.searchingString&&this.currentPath){if(yield this.FileManagerServer.createEmptyFolder(this.currentPath),!(this.currentFolder instanceof HTMLElement))throw new Error("The hierarchy of elements was violated");yield this.updateNavFolders(),this.updateFileList(this.currentFolder,!0)}}))}updateInterface(){return i(this,void 0,void 0,(function*(){this.currentFolder instanceof HTMLElement&&(yield this.updateNavFolders(),this.updateFileList(this.currentFolder,!0),this.selectedFilesPaths=[],this.toolsState.cut=!1,this.toolsState.copy=!1,this.updateInsert(),this.updateCreateFolderAndFiles())}))}initInterface(){var e,t,s,i,l,a,n,o,r,d,h,c,m,f,u,p,g,_,v,y,S,b,F,M,E,L,w,C,P,x,k,A,T,z,O,D,H,I,R,B,q,$,N,U,K,j,X,W,J,G,V,Y,Z,Q,ee,te,se,ie,le,ae,ne,oe,re,de,he,ce,me,fe,ue,pe,ge,_e,ve,ye,Se,be,Fe,Me,Ee,Le,we,Ce;let Pe,xe,ke=document.createElement("div");if(this.FileManagerStyles.fmAddClass(ke,"fm_super_root"),ke.id="fm_super_root",ke.classList.add("fm_super_root"),this.FileManagerStyles.updatableElements.fm_super_root=[ke],1==(null===(t=null===(e=this.options)||void 0===e?void 0:e.addressPaneOptions)||void 0===t?void 0:t.addressPaneEnabled)){let e;if(Pe=document.createElement("div"),this.FileManagerStyles.fmAddClass(Pe,"fm_filemanager_address"),Pe.classList.add("fm_filemanager_address"),this.FileManagerStyles.updatableElements.fm_filemanager_address=[Pe],(null===(i=null===(s=this.options)||void 0===s?void 0:s.addressPaneOptions)||void 0===i?void 0:i.backButtonEnabled)||(null===(a=null===(l=this.options)||void 0===l?void 0:l.addressPaneOptions)||void 0===a?void 0:a.upButtonEnabled)||(null===(o=null===(n=this.options)||void 0===n?void 0:n.addressPaneOptions)||void 0===o?void 0:o.refreshButtonEnabled)){if(e=document.createElement("div"),this.FileManagerStyles.fmAddClass(e,"fm_arrows_block"),e.classList.add("fm_arrows_block"),this.FileManagerStyles.updatableElements.fm_arrows_block=[e],1==(null===(d=null===(r=this.options)||void 0===r?void 0:r.addressPaneOptions)||void 0===d?void 0:d.backButtonEnabled)){let t=document.createElement("div");this.FileManagerStyles.fmAddClass(t,"fm_arrow_wrapper"),this.FileManagerStyles.fmAddClass(t,"fm_arrow_back"),t.classList.add("fm_arrow_wrapper"),t.classList.add("fm_arrow_back"),t.title=this.translations[this.currentLang].Back,t.addEventListener("click",this.handleBackArrowClick.bind(this)),this.FileManagerStyles.updatableElements.fm_arrow_wrapper=[t];let s=document.createElement("img");this.FileManagerStyles.fmAddClass(s,"fm_filemanager_arrow"),s.classList.add("fm_filemanager_arrow"),s.src=this.iconsPaths.arrowBack,this.FileManagerStyles.updatableElements.fm_filemanager_arrow=[s],t.append(s),e.append(t)}if(1==(null===(c=null===(h=this.options)||void 0===h?void 0:h.addressPaneOptions)||void 0===c?void 0:c.upButtonEnabled)){let t=document.createElement("div");this.FileManagerStyles.fmAddClass(t,"fm_arrow_wrapper"),this.FileManagerStyles.fmAddClass(t,"fm_arrow_up"),this.FileManagerStyles.fmAddClass(t,"fm_disabled"),t.classList.add("fm_arrow_wrapper"),t.classList.add("fm_arrow_up"),t.classList.add("fm_disabled"),t.style.pointerEvents="none",t.title=this.translations[this.currentLang].Up,t.addEventListener("click",this.handleUpArrowClick.bind(this)),this.FileManagerStyles.updatableElements.fm_arrow_wrapper.push(t);let s=document.createElement("img");this.FileManagerStyles.fmAddClass(s,"fm_filemanager_arrow"),s.classList.add("fm_filemanager_arrow"),s.src=this.iconsPaths.arrowUp,this.FileManagerStyles.updatableElements.fm_filemanager_arrow.push(s),t.append(s),e.append(t)}if(1==(null===(f=null===(m=this.options)||void 0===m?void 0:m.addressPaneOptions)||void 0===f?void 0:f.refreshButtonEnabled)){let t=document.createElement("div");this.FileManagerStyles.fmAddClass(t,"fm_arrow_wrapper"),this.FileManagerStyles.fmAddClass(t,"fm_arrow_refresh"),t.classList.add("fm_arrow_wrapper"),t.classList.add("fm_arrow_refresh"),t.title=this.translations[this.currentLang].Refresh,t.addEventListener("click",this.handleRefreshClick.bind(this)),this.FileManagerStyles.updatableElements.fm_arrow_wrapper.push(t);let s=document.createElement("img");this.FileManagerStyles.fmAddClass(s,"fm_filemanager_arrow"),s.classList.add("fm_filemanager_arrow"),s.src=this.iconsPaths.refresh,this.FileManagerStyles.updatableElements.fm_filemanager_arrow.push(s),t.append(s),e.append(t)}}if(xe=document.createElement("div"),this.FileManagerStyles.fmAddClass(xe,"fm_current_path"),xe.classList.add("fm_current_path"),this.FileManagerStyles.updatableElements.fm_current_path=[xe],1==(null===(p=null===(u=this.options)||void 0===u?void 0:u.addressPaneOptions)||void 0===p?void 0:p.searchingEnabled)){let e=document.createElement("input");e.type="search",e.placeholder=this.translations[this.currentLang].Searching,this.FileManagerStyles.fmAddClass(e,"fm_search"),e.classList.add("fm_search"),this.FileManagerStyles.updatableElements.fm_search=[e],e.addEventListener("change",this.handleSearchChange.bind(this)),Pe.append(e)}let t=document.createElement("span");this.FileManagerStyles.fmAddClass(t,"fm_path_folder"),t.classList.add("fm_path_folder"),this.FileManagerStyles.updatableElements.fm_path_folder=[t],t.textContent=this.rootFolderName,xe.append(t),Pe.prepend(xe),e&&Pe.prepend(e),ke.append(Pe)}let Ae=document.createElement("div");if(this.FileManagerStyles.fmAddClass(Ae,"fm_filemanager_main"),Ae.classList.add("fm_filemanager_main"),this.FileManagerStyles.updatableElements.fm_filemanager_main=[Ae],1==(null===(_=null===(g=this.options)||void 0===g?void 0:g.toolsPaneOptions)||void 0===_?void 0:_.toolsPaneEnabled)){let e,t=document.createElement("div");if(this.FileManagerStyles.fmAddClass(t,"fm_filemanager_tools"),t.classList.add("fm_filemanager_tools"),this.FileManagerStyles.updatableElements.fm_filemanager_tools=[t],t.style.position="relative",null===(y=null===(v=this.options)||void 0===v?void 0:v.toolsPaneOptions)||void 0===y?void 0:y.uploadingFilesEnabled){let e=document.createElement("button");e.type="button",this.FileManagerStyles.fmAddClass(e,"fm_add_file_button"),e.classList.add("fm_add_file_button"),this.FileManagerStyles.updatableElements.fm_add_file_button=[e],e.addEventListener("click",this.handleUploadClick.bind(this));let s=document.createElement("img");s.src=this.iconsPaths.addFilesButton,this.FileManagerStyles.fmAddClass(s,"fm_add_file_icon"),s.classList.add("fm_add_file_icon"),e.append(s),this.FileManagerStyles.updatableElements.fm_add_file_icon=[s];let i=document.createElement("span");i.textContent=this.translations[this.currentLang].Upload,e.append(i);let l=document.createElement("div");this.FileManagerStyles.fmAddClass(l,"fm_upload_files_block"),this.FileManagerStyles.fmAddClass(l,"fm_hidden"),this.FileManagerStyles.updatableElements.fm_upload_files_block=[l],l.classList.add("fm_upload_files_block"),l.classList.add("fm_hidden");let a=document.createElement("div");this.FileManagerStyles.fmAddClass(a,"fm_upload_files_func_wrapper"),a.classList.add("fm_upload_files_func_wrapper"),this.FileManagerStyles.updatableElements.fm_upload_files_func_wrapper=[a];let n=document.createElement("img");n.src=this.iconsPaths.addFile,this.FileManagerStyles.fmAddClass(n,"fm_upload_files_func_icon"),this.FileManagerStyles.fmAddClass(n,"fm_upload_file"),n.classList.add("fm_upload_files_func_icon"),n.classList.add("fm_upload_file"),a.append(n),this.FileManagerStyles.updatableElements.fm_upload_files_func_icon=[n];let o=document.createElement("span");o.textContent=this.translations[this.currentLang]["Upload file"],this.FileManagerStyles.fmAddClass(o,"fm_upload_files_func_name"),o.classList.add("fm_upload_files_func_name"),this.FileManagerStyles.updatableElements.fm_upload_files_func_name=[o],a.append(o);let r=document.createElement("input");this.FileManagerStyles.fmAddClass(r,"fm_upload_file_func_input"),r.classList.add("fm_upload_file_func_input"),r.type="file",r.addEventListener("change",this.handleUploadingFile.bind(this)),a.append(r),l.append(a);let d=document.createElement("div");this.FileManagerStyles.fmAddClass(d,"fm_upload_files_func_wrapper"),d.classList.add("fm_upload_files_func_wrapper"),this.FileManagerStyles.updatableElements.fm_upload_files_func_wrapper.push(d);let h=document.createElement("img");h.src=this.iconsPaths.addFolder,this.FileManagerStyles.fmAddClass(h,"fm_upload_files_func_icon"),this.FileManagerStyles.fmAddClass(h,"fm_upload_folder"),h.classList.add("fm_upload_files_func_icon"),h.classList.add("fm_upload_folder"),d.append(h),this.FileManagerStyles.updatableElements.fm_upload_files_func_icon.push(h);let c=document.createElement("span");c.textContent=this.translations[this.currentLang]["Upload folder"],this.FileManagerStyles.fmAddClass(c,"fm_upload_files_func_name"),c.classList.add("fm_upload_files_func_name"),d.append(c),this.FileManagerStyles.updatableElements.fm_upload_files_func_name.push(c);let m=document.createElement("input");this.FileManagerStyles.fmAddClass(m,"fm_upload_files_func_input"),m.classList.add("fm_upload_files_func_input"),m.type="file",m.setAttribute("webkitdirectory",""),m.setAttribute("directory",""),m.setAttribute("multiple",""),m.addEventListener("change",this.handleUploadingFolder.bind(this)),d.append(m),l.append(d),t.append(l),t.append(e)}if(null===(F=null===(b=null===(S=this.options)||void 0===S?void 0:S.toolsPaneOptions)||void 0===b?void 0:b.toolsEnabled)||void 0===F?void 0:F.movingFiles){let e=document.createElement("img");e.src=this.iconsPaths.cut,this.FileManagerStyles.fmAddClass(e,"fm_tool"),this.FileManagerStyles.fmAddClass(e,"fm_cut"),e.classList.add("fm_tool"),e.classList.add("fm_cut"),e.title=this.translations[this.currentLang]["Cut file/folder"],e.addEventListener("click",this.handleCutClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool=[e];let s=document.createElement("img");s.src=this.iconsPaths.copy,this.FileManagerStyles.fmAddClass(s,"fm_tool"),this.FileManagerStyles.fmAddClass(s,"fm_copy"),s.classList.add("fm_tool"),s.classList.add("fm_copy"),s.title=this.translations[this.currentLang]["Copy file/folder"],s.addEventListener("click",this.handleCopyClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool.push(s);let i=document.createElement("img");i.src=this.iconsPaths.insert,this.FileManagerStyles.fmAddClass(i,"fm_tool"),this.FileManagerStyles.fmAddClass(i,"fm_insert"),i.classList.add("fm_tool"),i.classList.add("fm_insert"),i.title=this.translations[this.currentLang]["Paste file/folder"],i.addEventListener("click",this.handleInsertClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool?this.FileManagerStyles.updatableElements.fm_tool.push(i):this.FileManagerStyles.updatableElements.fm_tool=[i],t.append(e),t.append(s),t.append(i)}if(null===(L=null===(E=null===(M=this.options)||void 0===M?void 0:M.toolsPaneOptions)||void 0===E?void 0:E.toolsEnabled)||void 0===L?void 0:L.renamingFiles){let e=document.createElement("img");e.src=this.iconsPaths.rename,this.FileManagerStyles.fmAddClass(e,"fm_tool"),this.FileManagerStyles.fmAddClass(e,"fm_rename"),e.classList.add("fm_tool"),e.classList.add("fm_rename"),e.title=this.translations[this.currentLang]["Rename file/folder"],e.addEventListener("click",this.handleRenameClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool?this.FileManagerStyles.updatableElements.fm_tool.push(e):this.FileManagerStyles.updatableElements.fm_tool=[e],t.append(e)}if(null===(P=null===(C=null===(w=this.options)||void 0===w?void 0:w.toolsPaneOptions)||void 0===C?void 0:C.toolsEnabled)||void 0===P?void 0:P.deletingFiles){let e=document.createElement("img");e.src=this.iconsPaths.remove,this.FileManagerStyles.fmAddClass(e,"fm_tool"),this.FileManagerStyles.fmAddClass(e,"fm_remove"),e.classList.add("fm_tool"),e.classList.add("fm_remove"),e.title=this.translations[this.currentLang]["Remove file/folder"],e.addEventListener("click",this.handleRemoveClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool?this.FileManagerStyles.updatableElements.fm_tool.push(e):this.FileManagerStyles.updatableElements.fm_tool=[e],t.append(e)}if(null===(A=null===(k=null===(x=this.options)||void 0===x?void 0:x.toolsPaneOptions)||void 0===k?void 0:k.toolsEnabled)||void 0===A?void 0:A.downloadingFiles){let e=document.createElement("img");e.src=this.iconsPaths.download,this.FileManagerStyles.fmAddClass(e,"fm_tool"),this.FileManagerStyles.fmAddClass(e,"fm_download"),e.classList.add("fm_tool"),e.classList.add("fm_download"),e.title=this.translations[this.currentLang]["Download file/folder"],e.addEventListener("click",this.handleDownloadClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool?this.FileManagerStyles.updatableElements.fm_tool.push(e):this.FileManagerStyles.updatableElements.fm_tool=[e],t.append(e)}if(null===(O=null===(z=null===(T=this.options)||void 0===T?void 0:T.toolsPaneOptions)||void 0===z?void 0:z.toolsEnabled)||void 0===O?void 0:O.createFiles){let e=document.createElement("img");e.src=this.iconsPaths.createFile,this.FileManagerStyles.fmAddClass(e,"fm_tool"),this.FileManagerStyles.fmAddClass(e,"fm_create_file"),e.classList.add("fm_tool"),e.classList.add("fm_create_file"),e.title=this.translations[this.currentLang]["Create empty file"],e.addEventListener("click",this.handleCreateFileClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool?this.FileManagerStyles.updatableElements.fm_tool.push(e):this.FileManagerStyles.updatableElements.fm_tool=[e],t.append(e);let s=document.createElement("img");s.src=this.iconsPaths.createFolder,this.FileManagerStyles.fmAddClass(s,"fm_tool"),this.FileManagerStyles.fmAddClass(s,"fm_create_folder"),s.classList.add("fm_tool"),s.classList.add("fm_create_folder"),s.title=this.translations[this.currentLang]["Create empty folder"],s.addEventListener("click",this.handleCreateFolderClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool?this.FileManagerStyles.updatableElements.fm_tool.push(s):this.FileManagerStyles.updatableElements.fm_tool=[s],t.append(s)}if(!0===(null===(H=null===(D=this.options)||void 0===D?void 0:D.toolsPaneOptions)||void 0===H?void 0:H.fileDisplayModesEnabled)){e=document.createElement("div"),this.FileManagerStyles.fmAddClass(e,"fm_grid_wrapper"),e.classList.add("fm_grid_wrapper");let s=document.createElement("img");s.src=this.iconsPaths.list,this.FileManagerStyles.fmAddClass(s,"fm_tool"),this.FileManagerStyles.fmAddClass(s,"fm_list"),s.classList.add("fm_tool"),s.classList.add("fm_list"),s.title=this.translations[this.currentLang]["Change file display to list"],s.addEventListener("click",this.handleListDisplayModeClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool?this.FileManagerStyles.updatableElements.fm_tool.push(s):this.FileManagerStyles.updatableElements.fm_tool=[s];let i=document.createElement("img");i.src=this.iconsPaths.grid,this.FileManagerStyles.fmAddClass(i,"fm_tool"),this.FileManagerStyles.fmAddClass(i,"fm_tiles"),i.classList.add("fm_tool"),i.classList.add("fm_tiles"),i.title=this.translations[this.currentLang]["Change file display to tiles"],i.addEventListener("click",this.handleTilesDisplayModeClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool.push(i),e.append(s),e.append(i),xe instanceof HTMLElement&&!(null===(R=null===(I=this.options)||void 0===I?void 0:I.toolsPaneOptions)||void 0===R?void 0:R.uploadingFilesEnabled)?xe.after(e):t.append(e)}if(!0===(null===($=null===(q=null===(B=this.options)||void 0===B?void 0:B.toolsPaneOptions)||void 0===q?void 0:q.settingsOptions)||void 0===$?void 0:$.settingsEnabled)&&((null===(K=null===(U=null===(N=this.options)||void 0===N?void 0:N.toolsPaneOptions)||void 0===U?void 0:U.settingsOptions)||void 0===K?void 0:K.sizeSettingsEnabled)||(null===(W=null===(X=null===(j=this.options)||void 0===j?void 0:j.toolsPaneOptions)||void 0===X?void 0:X.settingsOptions)||void 0===W?void 0:W.colorSettingsEnabled))){let s=document.createElement("img");s.src=this.iconsPaths.settings,this.FileManagerStyles.fmAddClass(s,"fm_tool"),this.FileManagerStyles.fmAddClass(s,"fm_settings"),s.classList.add("fm_tool"),s.classList.add("fm_settings"),s.title=this.translations[this.currentLang].Settings,s.addEventListener("click",this.handleSettingsClick.bind(this)),this.FileManagerStyles.updatableElements.fm_tool?this.FileManagerStyles.updatableElements.fm_tool.push(s):this.FileManagerStyles.updatableElements.fm_tool=[s],xe instanceof HTMLElement&&!(null===(G=null===(J=this.options)||void 0===J?void 0:J.toolsPaneOptions)||void 0===G?void 0:G.uploadingFilesEnabled)?null==e?xe.after(s):e.after(s):t.append(s)}(null===(Y=null===(V=this.options)||void 0===V?void 0:V.toolsPaneOptions)||void 0===Y?void 0:Y.toolsPaneEnabled)&&((null===(Q=null===(Z=this.options)||void 0===Z?void 0:Z.toolsPaneOptions)||void 0===Q?void 0:Q.uploadingFilesEnabled)||(null===(se=null===(te=null===(ee=this.options)||void 0===ee?void 0:ee.toolsPaneOptions)||void 0===te?void 0:te.toolsEnabled)||void 0===se?void 0:se.deletingFiles)||(null===(ae=null===(le=null===(ie=this.options)||void 0===ie?void 0:ie.toolsPaneOptions)||void 0===le?void 0:le.toolsEnabled)||void 0===ae?void 0:ae.movingFiles)||(null===(re=null===(oe=null===(ne=this.options)||void 0===ne?void 0:ne.toolsPaneOptions)||void 0===oe?void 0:oe.toolsEnabled)||void 0===re?void 0:re.renamingFiles)||(null===(ce=null===(he=null===(de=this.options)||void 0===de?void 0:de.toolsPaneOptions)||void 0===he?void 0:he.toolsEnabled)||void 0===ce?void 0:ce.downloadingFiles))&&ke.append(t)}let Te=document.createElement("div");this.FileManagerStyles.fmAddClass(Te,"fm_folders_nav"),Te.classList.add("fm_folders_nav"),this.FileManagerStyles.updatableElements.fm_folders_nav=[Te];let ze=this.createHTMLNavFolder({name:this.rootFolderName},Te,!0);if(ze){let e=ze[0],t=ze[1],s=ze[2];s&&(this.FileManagerStyles.fmAddClass(s,"fm_folder_root_wrapper"),s.classList.add("fm_folder_root_wrapper"),this.FileManagerStyles.updatableElements.fm_folder_root_wrapper=[s]),null==e||e.addEventListener("click",this.handleOpenNavFolder.bind(this)),null==t||t.addEventListener("click",this.handleShowFileList.bind(this))}(null===(me=this.options)||void 0===me?void 0:me.navigationPaneEnabled)||(Te.style.display="none"),Ae.append(Te);let Oe=document.createElement("div");this.FileManagerStyles.fmAddClass(Oe,"fm_content_pane"),Oe.classList.add("fm_content_pane"),this.FileManagerStyles.updatableElements.fm_content_pane=[Oe];let De=document.createElement("div");this.FileManagerStyles.fmAddClass(De,"fm_files_tiles"),De.classList.add("fm_files_tiles"),this.FileManagerStyles.updatableElements.fm_files_tiles=[De],"tiles"===this.filesDisplayMode?De.style.display="flex":De.style.display="none";let He=document.createElement("div");this.FileManagerStyles.fmAddClass(He,"fm_metadata_block"),He.classList.add("fm_metadata_block"),this.FileManagerStyles.updatableElements.fm_metadata_block=[He],"tiles"===this.filesDisplayMode?He.style.display="none":He.style.display="flex";let Ie=document.createElement("div");this.FileManagerStyles.fmAddClass(Ie,"fm_files_list"),Ie.classList.add("fm_files_list"),this.FileManagerStyles.updatableElements.fm_files_list=[Ie],"list"===this.filesDisplayMode?Ie.style.display="block":Ie.style.display="none";let Re=document.createElement("div");this.FileManagerStyles.fmAddClass(Re,"fm_metadata_name"),this.FileManagerStyles.fmAddClass(Re,"fm_metadata"),Re.classList.add("fm_metadata_name"),Re.classList.add("fm_metadata"),Re.textContent=this.translations[this.currentLang].Name,this.FileManagerStyles.updatableElements.fm_metadata=[Re];let Be=document.createElement("div");this.FileManagerStyles.fmAddClass(Be,"fm_metadata_changedate"),this.FileManagerStyles.fmAddClass(Be,"fm_metadata"),Be.classList.add("fm_metadata_changedate"),Be.classList.add("fm_metadata"),Be.textContent=this.translations[this.currentLang]["Date of change"],this.FileManagerStyles.updatableElements.fm_metadata.push(Be);let qe=document.createElement("div");this.FileManagerStyles.fmAddClass(qe,"fm_metadata_type"),this.FileManagerStyles.fmAddClass(qe,"fm_metadata"),qe.classList.add("fm_metadata_type"),qe.classList.add("fm_metadata"),qe.textContent=this.translations[this.currentLang].Type,this.FileManagerStyles.updatableElements.fm_metadata.push(qe);let $e=document.createElement("div");this.FileManagerStyles.fmAddClass($e,"fm_metadata_size"),this.FileManagerStyles.fmAddClass($e,"fm_metadata"),$e.classList.add("fm_metadata_size"),$e.classList.add("fm_metadata"),$e.textContent=this.translations[this.currentLang].Size,this.FileManagerStyles.updatableElements.fm_metadata.push($e),He.append(Re),He.append(Be),He.append(qe),He.append($e);let Ne=document.createElement("div");Ne.classList.add("fm_loader_wrapper"),this.FileManagerStyles.fmAddClass(Ne,"fm_loader_wrapper"),Ne.style.display="none";let Ue=document.createElement("span");if(Ue.classList.add("fm_loader"),this.FileManagerStyles.fmAddClass(Ue,"fm_loader"),this.FileManagerStyles.addRotationAnimation(Ue),Ne.append(Ue),this.FileManagerStyles.updatableElements.fm_loader=[Ue],Oe.append(He),Oe.append(Ie),Oe.append(De),Oe.append(Ne),Ae.append(Oe),ke.append(Ae),(null===(pe=null===(ue=null===(fe=this.options)||void 0===fe?void 0:fe.toolsPaneOptions)||void 0===ue?void 0:ue.settingsOptions)||void 0===pe?void 0:pe.settingsEnabled)&&((null===(ve=null===(_e=null===(ge=this.options)||void 0===ge?void 0:ge.toolsPaneOptions)||void 0===_e?void 0:_e.settingsOptions)||void 0===ve?void 0:ve.colorSettingsEnabled)||(null===(be=null===(Se=null===(ye=this.options)||void 0===ye?void 0:ye.toolsPaneOptions)||void 0===Se?void 0:Se.settingsOptions)||void 0===be?void 0:be.sizeSettingsEnabled))){let e=document.createElement("div");this.FileManagerStyles.fmAddClass(e,"fm_settings_panel"),e.classList.add("fm_settings_panel"),this.FileManagerStyles.updatableElements.fm_settings_panel=[e],e.style.display="none";let t=document.createElement("div");this.FileManagerStyles.fmAddClass(t,"fm_title_block"),t.classList.add("fm_title_block"),this.FileManagerStyles.updatableElements.fm_title_block=[t],t.textContent=this.translations[this.currentLang].Settings;let s=document.createElement("img");this.FileManagerStyles.fmAddClass(s,"fm_leave_settings_arrow"),s.classList.add("fm_leave_settings_arrow"),this.FileManagerStyles.updatableElements.fm_leave_settings_arrow=[s],s.style.margin="0px",s.src=this.iconsPaths.arrowBack,s.addEventListener("click",this.handleSettingsClick.bind(this)),t.append(s);let i=document.createElement("form");this.FileManagerStyles.fmAddClass(i,"fm_settings_form"),i.classList.add("fm_settings_form"),i.name="fm_settings_form",i.addEventListener("submit",this.handleSubmitSettings.bind(this));let l=document.createElement("div");if(this.FileManagerStyles.fmAddClass(l,"fm_params_panel"),l.classList.add("fm_params_panel"),null===(Ee=null===(Me=null===(Fe=this.options)||void 0===Fe?void 0:Fe.toolsPaneOptions)||void 0===Me?void 0:Me.settingsOptions)||void 0===Ee?void 0:Ee.colorSettingsEnabled){let e=document.createElement("input");this.FileManagerStyles.fmAddClass(e,"fm_color_input"),e.classList.add("fm_color_input"),e.type="color",e.name="hover_color",e.value=this.FileManagerStyles.fileManagerMutableStyles.colors.hover,this.settingsColorInput.hover=e;let t=document.createElement("label");this.FileManagerStyles.fmAddClass(t,"fm_color_label"),t.classList.add("fm_color_label"),this.FileManagerStyles.updatableElements.fm_color_label=[t],t.innerHTML=this.translations[this.currentLang]["Hover color"]+":<br>",t.append(e);let s=document.createElement("input");this.FileManagerStyles.fmAddClass(s,"fm_color_input"),s.classList.add("fm_color_input"),s.type="color",s.name="background_color",s.value=this.FileManagerStyles.fileManagerMutableStyles.colors.main_background,this.settingsColorInput.main_background=s;let i=document.createElement("label");this.FileManagerStyles.fmAddClass(i,"fm_color_label"),i.classList.add("fm_color_label"),this.FileManagerStyles.updatableElements.fm_color_label.push(i),i.innerHTML=this.translations[this.currentLang]["Background color"]+":<br>",i.append(s);let a=document.createElement("input");this.FileManagerStyles.fmAddClass(a,"fm_color_input"),a.classList.add("fm_color_input"),a.type="color",a.name="border_color",a.value=this.FileManagerStyles.fileManagerMutableStyles.colors.border,this.settingsColorInput.border=a;let n=document.createElement("label");this.FileManagerStyles.fmAddClass(n,"fm_color_label"),n.classList.add("fm_color_label"),this.FileManagerStyles.updatableElements.fm_color_label.push(n),n.innerHTML=this.translations[this.currentLang]["Border color"]+":<br>",n.append(a);let o=document.createElement("input");this.FileManagerStyles.fmAddClass(o,"fm_color_input"),o.classList.add("fm_color_input"),o.type="color",o.name="select_color",o.value=this.FileManagerStyles.fileManagerMutableStyles.colors.selected,this.settingsColorInput.selected=o;let r=document.createElement("label");this.FileManagerStyles.fmAddClass(r,"fm_color_label"),r.classList.add("fm_color_label"),this.FileManagerStyles.updatableElements.fm_color_label.push(r),r.innerHTML=this.translations[this.currentLang]["Select color"]+":<br>",r.append(o);let d=document.createElement("input");this.FileManagerStyles.fmAddClass(d,"fm_color_input"),d.classList.add("fm_color_input"),d.type="color",d.name="text_color",d.value=this.FileManagerStyles.fileManagerMutableStyles.colors.text_color,this.settingsColorInput.text_color=d;let h=document.createElement("label");this.FileManagerStyles.fmAddClass(h,"fm_color_label"),h.classList.add("fm_color_label"),this.FileManagerStyles.updatableElements.fm_color_label.push(h),h.innerHTML=this.translations[this.currentLang]["Text color"]+":<br>",h.append(d),l.append(t),l.append(i),l.append(n),l.append(r),l.append(h)}if(null===(Ce=null===(we=null===(Le=this.options)||void 0===Le?void 0:Le.toolsPaneOptions)||void 0===we?void 0:we.settingsOptions)||void 0===Ce?void 0:Ce.sizeSettingsEnabled){let e=document.createElement("select");this.FileManagerStyles.fmAddClass(e,"fm_select_input"),this.FileManagerStyles.updatableElements.fm_select_input=[e],e.classList.add("fm_select_input"),e.name="address",this.settingsInterfaceSelect.address=e;let t=document.createElement("option");t.value="xsmall",t.textContent=this.translations[this.currentLang].xsmall,t.selected="xsmall"===this.FileManagerStyles.fileManagerMutableStyles.sizing.address;let s=document.createElement("option");s.value="small",s.textContent=this.translations[this.currentLang].small,s.selected="small"===this.FileManagerStyles.fileManagerMutableStyles.sizing.address;let i=document.createElement("option");i.value="medium",i.textContent=this.translations[this.currentLang].medium,i.selected="medium"===this.FileManagerStyles.fileManagerMutableStyles.sizing.address;let a=document.createElement("option");a.value="large",a.textContent=this.translations[this.currentLang].large,a.selected="large"===this.FileManagerStyles.fileManagerMutableStyles.sizing.address;let n=document.createElement("option");n.value="xlarge",n.textContent=this.translations[this.currentLang].xlarge,n.selected="xlarge"===this.FileManagerStyles.fileManagerMutableStyles.sizing.address,e.append(t),e.append(s),e.append(i),e.append(a),e.append(n);let o=document.createElement("label");this.FileManagerStyles.fmAddClass(o,"fm_color_label"),o.classList.add("fm_color_label"),this.FileManagerStyles.updatableElements.fm_color_label?this.FileManagerStyles.updatableElements.fm_color_label.push(o):this.FileManagerStyles.updatableElements.fm_color_label=[o],o.innerHTML=this.translations[this.currentLang]["Address Pane interface"]+":<br>",o.append(e);let r=document.createElement("select");this.FileManagerStyles.fmAddClass(r,"fm_select_input"),this.FileManagerStyles.updatableElements.fm_select_input.push(r),r.classList.add("fm_select_input"),r.name="tools",this.settingsInterfaceSelect.tools=r;let d=document.createElement("option");d.value="xsmall",d.textContent=this.translations[this.currentLang].xsmall,d.selected="xsmall"===this.FileManagerStyles.fileManagerMutableStyles.sizing.tools;let h=document.createElement("option");h.value="small",h.textContent=this.translations[this.currentLang].small,h.selected="small"===this.FileManagerStyles.fileManagerMutableStyles.sizing.tools;let c=document.createElement("option");c.value="medium",c.textContent=this.translations[this.currentLang].medium,c.selected="medium"===this.FileManagerStyles.fileManagerMutableStyles.sizing.tools;let m=document.createElement("option");m.value="large",m.textContent=this.translations[this.currentLang].large,m.selected="large"===this.FileManagerStyles.fileManagerMutableStyles.sizing.tools;let f=document.createElement("option");f.value="xlarge",f.textContent=this.translations[this.currentLang].xlarge,f.selected="xlarge"===this.FileManagerStyles.fileManagerMutableStyles.sizing.tools,r.append(d),r.append(h),r.append(c),r.append(m),r.append(f);let u=document.createElement("label");this.FileManagerStyles.fmAddClass(u,"fm_color_label"),u.classList.add("fm_color_label"),this.FileManagerStyles.updatableElements.fm_color_label.push(u),u.innerHTML=this.translations[this.currentLang]["Tools Pane interface"]+":<br>",u.append(r);let p=document.createElement("select");this.FileManagerStyles.fmAddClass(p,"fm_select_input"),this.FileManagerStyles.updatableElements.fm_select_input.push(p),p.classList.add("fm_select_input"),p.name="navigation_pane",this.settingsInterfaceSelect.navigation_pane=p;let g=document.createElement("option");g.value="xsmall",g.textContent=this.translations[this.currentLang].xsmall,g.selected="xsmall"===this.FileManagerStyles.fileManagerMutableStyles.sizing.navigation_pane;let _=document.createElement("option");_.value="small",_.textContent=this.translations[this.currentLang].small,_.selected="small"===this.FileManagerStyles.fileManagerMutableStyles.sizing.navigation_pane;let v=document.createElement("option");v.value="medium",v.textContent=this.translations[this.currentLang].medium,v.selected="medium"===this.FileManagerStyles.fileManagerMutableStyles.sizing.navigation_pane;let y=document.createElement("option");y.value="large",y.textContent=this.translations[this.currentLang].large,y.selected="large"===this.FileManagerStyles.fileManagerMutableStyles.sizing.navigation_pane;let S=document.createElement("option");S.value="xlarge",S.textContent=this.translations[this.currentLang].xlarge,S.selected="xlarge"===this.FileManagerStyles.fileManagerMutableStyles.sizing.navigation_pane,p.append(g),p.append(_),p.append(v),p.append(y),p.append(S);let b=document.createElement("label");this.FileManagerStyles.fmAddClass(b,"fm_color_label"),b.classList.add("fm_color_label"),this.FileManagerStyles.updatableElements.fm_color_label.push(b),b.innerHTML=this.translations[this.currentLang]["Navigation Pane interface"]+":<br>",b.append(p);let F=document.createElement("select");this.FileManagerStyles.fmAddClass(F,"fm_select_input"),this.FileManagerStyles.updatableElements.fm_select_input.push(F),F.classList.add("fm_select_input"),F.name="content_pane",this.settingsInterfaceSelect.content_pane=F;let M=document.createElement("option");M.value="xsmall",M.textContent=this.translations[this.currentLang].xsmall,M.selected="xsmall"===this.FileManagerStyles.fileManagerMutableStyles.sizing.content_pane;let E=document.createElement("option");E.value="small",E.textContent=this.translations[this.currentLang].small,E.selected="small"===this.FileManagerStyles.fileManagerMutableStyles.sizing.content_pane;let L=document.createElement("option");L.value="medium",L.textContent=this.translations[this.currentLang].medium,L.selected="medium"===this.FileManagerStyles.fileManagerMutableStyles.sizing.content_pane;let w=document.createElement("option");w.value="large",w.textContent=this.translations[this.currentLang].large,w.selected="large"===this.FileManagerStyles.fileManagerMutableStyles.sizing.content_pane;let C=document.createElement("option");C.value="xlarge",C.textContent=this.translations[this.currentLang].xlarge,C.selected="xlarge"===this.FileManagerStyles.fileManagerMutableStyles.sizing.content_pane,F.append(M),F.append(E),F.append(L),F.append(w),F.append(C);let P=document.createElement("label");this.FileManagerStyles.fmAddClass(P,"fm_color_label"),P.classList.add("fm_color_label"),this.FileManagerStyles.updatableElements.fm_color_label.push(P),P.innerHTML=this.translations[this.currentLang]["Content Pane interface"]+":<br>",P.append(F);let x=document.createElement("select");this.FileManagerStyles.fmAddClass(x,"fm_select_input"),this.FileManagerStyles.updatableElements.fm_select_input.push(x),x.classList.add("fm_select_input"),x.name="settings_panel",this.settingsInterfaceSelect.settings_panel=x;let k=document.createElement("option");k.value="xsmall",k.textContent=this.translations[this.currentLang].xsmall,k.selected="xsmall"===this.FileManagerStyles.fileManagerMutableStyles.sizing.settings_panel;let A=document.createElement("option");A.value="small",A.textContent=this.translations[this.currentLang].small,A.selected="small"===this.FileManagerStyles.fileManagerMutableStyles.sizing.settings_panel;let T=document.createElement("option");T.value="medium",T.textContent=this.translations[this.currentLang].medium,T.selected="medium"===this.FileManagerStyles.fileManagerMutableStyles.sizing.settings_panel;let z=document.createElement("option");z.value="large",z.textContent=this.translations[this.currentLang].large,z.selected="large"===this.FileManagerStyles.fileManagerMutableStyles.sizing.settings_panel;let O=document.createElement("option");O.value="xlarge",O.textContent=this.translations[this.currentLang].xlarge,O.selected="xlarge"===this.FileManagerStyles.fileManagerMutableStyles.sizing.settings_panel,x.append(k),x.append(A),x.append(T),x.append(z),x.append(O);let D=document.createElement("label");this.FileManagerStyles.fmAddClass(D,"fm_color_label"),D.classList.add("fm_color_label"),this.FileManagerStyles.updatableElements.fm_color_label.push(D),D.innerHTML=this.translations[this.currentLang]["Settings Pane interface"]+":<br>",D.append(x),l.append(o),l.append(u),l.append(b),l.append(P),l.append(D)}let a=document.createElement("div");this.FileManagerStyles.fmAddClass(a,"fm_buttons_panel"),a.classList.add("fm_buttons_panel");let n=document.createElement("span");this.FileManagerStyles.fmAddClass(n,"fm_message_submit"),n.classList.add("fm_message_submit"),n.textContent="";let o=document.createElement("button");this.FileManagerStyles.fmAddClass(o,"fm_reset_settings_button"),o.classList.add("fm_reset_settings_button"),this.FileManagerStyles.updatableElements.fm_reset_settings_button=[o],o.textContent=this.translations[this.currentLang]["To default"],o.type="button",o.addEventListener("click",this.handleResetSettings.bind(this));let r=document.createElement("button");this.FileManagerStyles.fmAddClass(r,"fm_submit_settings_button"),r.classList.add("fm_submit_settings_button"),this.FileManagerStyles.updatableElements.fm_submit_settings_button=[r],r.textContent=this.translations[this.currentLang].Submit,r.type="submit",a.append(n),a.append(o),a.append(r),i.append(l),i.append(a),e.append(t),e.append(i),ke.append(e)}return this.root.append(ke),ke}}const n={FileManager:a,FileManagerServer:l};return t})()));